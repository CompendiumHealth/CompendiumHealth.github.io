import{k as q,J as g,m as _,p as T,G as y,c as B,q as s,a as i,L as a,t as p,w,a9 as P,S as m,s as b,a6 as e,o as S}from"./chunks/framework.Bev6ATEH.js";import{s as A,c as I,b as F,A as V,z as j,e as o,bv as l,t as O,B as f,bu as N,bV as D,aV as R,aX as z}from"./chunks/theme.DAWdUpF4.js";import{f as Y}from"./chunks/feature.DXDMwmIR.js";import{m as W}from"./chunks/mesh.DUGB6pHu.js";const $={id:"hexbin-transform",tabindex:"-1"},G=s("a",{class:"header-anchor",href:"#hexbin-transform","aria-label":'Permalink to "Hexbin transform <VersionBadge version="0.5.0" />"'},"​",-1),H=s("p",null,[i("The "),s("strong",null,"hexbin transform"),i(" groups two-dimensional quantitative or temporal data — continuous measurements such as heights, weights, or temperatures — into discrete hexagonal bins. You can then compute summary statistics for each bin, such as a count, sum, or proportion. The hexbin transform is most often used to make heatmaps with the "),s("a",{href:"./../marks/dot"},"dot mark"),i(".")],-1),U=s("p",null,[i("For example, the heatmap below shows the weights and heights of Olympic athletes. The color of each hexagon represents the number ("),s("em",null,"count"),i(") of athletes with similar weight and height.")],-1),M=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-olympians-hexbin?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),X={class:"language-js vp-adaptive-theme"},J=s("button",{title:"Copy Code",class:"copy"},null,-1),L=s("span",{class:"lang"},"js",-1),K={class:"shiki shiki-themes github-light github-dark vp-code"},Q=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot")],-1),Z=e("",1),ss={class:"line"},is=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  .",-1),ts=s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot",-1),es=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({color: {scheme: ",-1),as={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},ns=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}})",-1),hs=e("",2),ls={class:"label-input"},os={style:{"font-variant-numeric":"tabular-nums"}},rs=e("",3),ps=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-hexbin-redundant?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),ks={class:"language-js vp-adaptive-theme"},ds=s("button",{title:"Copy Code",class:"copy"},null,-1),Es=s("span",{class:"lang"},"js",-1),gs={class:"shiki shiki-themes github-light github-dark vp-code"},cs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot")],-1),us=e("",1),_s={class:"line"},ys=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  .",-1),ms=s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot",-1),bs=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({color: {scheme: ",-1),Fs={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},fs=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}})",-1),vs=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,[i("Setting a "),s("strong",null,"stroke"),i(" ensures that the smallest hexagons are visible.")])],-1),Cs=s("strong",null,"fill",-1),xs=s("strong",null,"r",-1),qs=s("strong",null,"r",-1),Ts=s("em",null,"count",-1),Bs=s("strong",null,"fill",-1),ws=s("em",null,"mode",-1),Ps=e("",3),Ss=e("",3),As=e("",3),Is=e("",4),Vs=e("",3),js=e("",3),Os=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-hexbin-inset?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),Ns={class:"language-js vp-adaptive-theme"},Ds=s("button",{title:"Copy Code",class:"copy"},null,-1),Rs=s("span",{class:"lang"},"js",-1),zs={class:"shiki shiki-themes github-light github-dark vp-code"},Ys=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot")],-1),Ws=e("",1),$s={class:"line"},Gs=e("",5),Hs={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},Us=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}})",-1),Ms=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},"TIP"),s("p",null,[i("You can also set the dot’s "),s("strong",null,"clip"),i(" option to true to prevent the hexagons from escaping.")])],-1),Xs=s("p",null,[i("Alternatively, use the "),s("a",{href:"./../marks/axis"},"axis mark"),i(" to draw axes on top of the hexagons.")],-1),Js=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-hexbin-and-axes?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),Ls={class:"language-js vp-adaptive-theme"},Ks=s("button",{title:"Copy Code",class:"copy"},null,-1),Qs=s("span",{class:"lang"},"js",-1),Zs={class:"shiki shiki-themes github-light github-dark vp-code"},si=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")],-1),ii={class:"line"},ti=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  color: {scheme: ",-1),ei={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},ai=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},",-1),ni=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  marks: [")],-1),hi=e("",1),li=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"axisX"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(),")],-1),oi=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"axisY"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()")],-1),ri=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]")],-1),pi=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1),ki=e("",4),di=e("",17),Ei=s("em",null,"x",-1),gi=s("em",null,"x",-1),ci=s("em",null,"y",-1),ui=s("em",null,"y",-1),_i=e("",7),Ci=JSON.parse('{"title":"Hexbin transform","description":"","frontmatter":{},"headers":[],"relativePath":"transforms/hexbin.md","filePath":"transforms/hexbin.md"}'),yi={name:"transforms/hexbin.md"},xi=Object.assign(yi,{setup(mi){const k=q(20),n=g([{weight:31,height:1.21,sex:"female"},{weight:170,height:2.21,sex:"male"}]),c=g([]),r=g(null),v=_(()=>r.value?Y(r.value,r.value.objects.nation):{type:null}),C=_(()=>r.value?W(r.value,r.value.objects.states,(t,d)=>t!==d):{type:null}),u=A({color:{type:"categorical"}}).range;return T(()=>{I("../data/athletes.csv",F).then(t=>n.value=t),V("../data/walmarts.tsv",F).then(t=>c.value=t),j("../data/us-counties-10m.json").then(t=>r.value=t)}),(t,d)=>{const E=y("VersionBadge"),h=y("PlotRender");return S(),B("div",null,[s("h1",$,[i("Hexbin transform "),a(E,{version:"0.5.0"}),i(),G]),H,U,a(h,{defer:"",mark:o(n.value,l({fill:"count"},{x:"weight",y:"height"})),options:{color:{scheme:t.$dark?"turbo":"YlGnBu"}}},null,8,["mark","options"]),M,s("div",X,[J,L,s("pre",K,[s("code",null,[Q,i(`
`),Z,i(`
`),s("span",ss,[is,ts,es,s("span",as,'"'+p(t.$dark?"turbo":"YlGnBu")+'"',1),ns])])])]),hs,s("p",null,[s("label",ls,[i(" Bin width: "),w(s("input",{type:"range","onUpdate:modelValue":d[0]||(d[0]=x=>k.value=x),min:"0",max:"40",step:"0.1"},null,512),[[P,k.value,void 0,{number:!0}]]),s("span",os,p(k.value.toLocaleString("en-US",{minimumFractionDigits:1})),1)])]),a(h,{defer:"",mark:o(n.value,l({r:"count"},{x:"weight",y:"height",binWidth:k.value})),options:{}},null,8,["mark"]),rs,a(h,{defer:"",mark:o(n.value,l({fill:"count",r:"count"},{x:"weight",y:"height",stroke:"currentColor"})),options:{color:{scheme:t.$dark?"turbo":"YlGnBu"}}},null,8,["mark","options"]),ps,s("div",ks,[ds,Es,s("pre",gs,[s("code",null,[cs,i(`
`),us,i(`
`),s("span",_s,[ys,ms,bs,s("span",Fs,'"'+p(t.$dark?"turbo":"YlGnBu")+'"',1),fs])])])]),vs,s("p",null,[i("Alternatively, the "),Cs,i(" and "),xs,i(" channels can encode independent (or “bivariate”) dimensions of data. Below, the "),qs,i(" channel uses "),Ts,i(" as before, while the "),Bs,i(" channel uses "),ws,i(" to show the most frequent sex of athletes in each hexagon. The larger athletes are more likely to be "),s("span",{style:m({borderBottom:`solid 2px ${b(u)[1]}`})},"male",4),i(", while the smaller athletes are more likely to be "),s("span",{style:m({borderBottom:`solid 2px ${b(u)[0]}`})},"female",4),i(".")]),a(h,{defer:"",mark:o(n.value,l({fill:"mode",r:"count"},{x:"weight",y:"height",fill:"sex"})),options:{}},null,8,["mark"]),Ps,a(h,{defer:"",mark:o(n.value,l({stroke:"mode",r:"count"},{x:"weight",y:"height",z:"sex",stroke:"sex"})),options:{}},null,8,["mark"]),Ss,a(h,{defer:"",mark:O(n.value,l({text:"count"},{x:"weight",y:"height"})),options:{}},null,8,["mark"]),As,a(h,{defer:"",options:{projection:"albers",r:{range:[0,16]},color:{scheme:"spectral",label:"First year opened",legend:!0},marks:[f(C.value,{strokeOpacity:.5}),f(v.value),o(c.value,l({r:"count",fill:"min"},{x:"longitude",y:"latitude",fill:"date"}))]}},null,8,["options"]),Is,a(h,{defer:"",options:{marks:[N(),o(n.value,l({r:"count"},{x:"weight",y:"height",fill:"currentColor"}))]}},null,8,["options"]),Vs,a(h,{defer:"",mark:D(n.value,l({r:"count"},{x:"weight",y:"height"})),options:{}},null,8,["mark"]),js,a(h,{defer:"",mark:o(n.value,l({fill:"count"},{x:"weight",y:"height"})),options:{inset:10,color:{scheme:t.$dark?"turbo":"YlGnBu"}}},null,8,["mark","options"]),Os,s("div",Ns,[Ds,Rs,s("pre",zs,[s("code",null,[Ys,i(`
`),Ws,i(`
`),s("span",$s,[Gs,s("span",Hs,'"'+p(t.$dark?"turbo":"YlGnBu")+'"',1),Us])])])]),Ms,Xs,a(h,{defer:"",options:{color:{scheme:t.$dark?"turbo":"YlGnBu"},marks:[o(n.value,l({fill:"count"},{x:"weight",y:"height"})),R(),z()]}},null,8,["options"]),Js,s("div",Ls,[Ks,Qs,s("pre",Zs,[s("code",null,[si,i(`
`),s("span",ii,[ti,s("span",ei,'"'+p(t.$dark?"turbo":"YlGnBu")+'"',1),ai]),i(`
`),ni,i(`
`),hi,i(`
`),li,i(`
`),oi,i(`
`),ri,i(`
`),pi])])]),ki,s("ul",null,[di,s("li",null,[Ei,i(),a(E,{version:"0.6.12",pr:"1916"}),i(" - the hexagon’s "),gi,i(" center")]),s("li",null,[ci,i(),a(E,{version:"0.6.12",pr:"1916"}),i(" - the hexagon’s "),ui,i(" center")])]),_i])}}});export{Ci as __pageData,xi as default};
