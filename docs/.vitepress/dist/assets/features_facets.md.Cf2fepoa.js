import{b as c,s as A,c as w,f as h,e as r,g as P,h as C,i as N,u as D,j as S,n as W,t as _,k as R,m as M}from"./chunks/theme.DAWdUpF4.js";import{i as x}from"./chunks/bls-industry-unemployment.BPQ_6ZKz.js";import{p as d}from"./chunks/penguins.C-n8z74Q.js";import{J as G,p as V,G as B,c as I,q as i,a as s,S as y,s as a,L as t,a6 as n,o as O}from"./chunks/framework.Bev6ATEH.js";const U=JSON.parse('[{"series":"1","x":"10","y":"8.04"},{"series":"1","x":"8","y":"6.95"},{"series":"1","x":"13","y":"7.58"},{"series":"1","x":"9","y":"8.81"},{"series":"1","x":"11","y":"8.33"},{"series":"1","x":"14","y":"9.96"},{"series":"1","x":"6","y":"7.24"},{"series":"1","x":"4","y":"4.26"},{"series":"1","x":"12","y":"10.84"},{"series":"1","x":"7","y":"4.81"},{"series":"1","x":"5","y":"5.68"},{"series":"2","x":"10","y":"9.14"},{"series":"2","x":"8","y":"8.14"},{"series":"2","x":"13","y":"8.74"},{"series":"2","x":"9","y":"8.77"},{"series":"2","x":"11","y":"9.26"},{"series":"2","x":"14","y":"8.1"},{"series":"2","x":"6","y":"6.13"},{"series":"2","x":"4","y":"3.1"},{"series":"2","x":"12","y":"9.13"},{"series":"2","x":"7","y":"7.26"},{"series":"2","x":"5","y":"4.74"},{"series":"3","x":"10","y":"7.46"},{"series":"3","x":"8","y":"6.77"},{"series":"3","x":"13","y":"12.74"},{"series":"3","x":"9","y":"7.11"},{"series":"3","x":"11","y":"7.81"},{"series":"3","x":"14","y":"8.84"},{"series":"3","x":"6","y":"6.08"},{"series":"3","x":"4","y":"5.39"},{"series":"3","x":"12","y":"8.15"},{"series":"3","x":"7","y":"6.42"},{"series":"3","x":"5","y":"5.73"},{"series":"4","x":"8","y":"6.58"},{"series":"4","x":"8","y":"5.76"},{"series":"4","x":"8","y":"7.71"},{"series":"4","x":"8","y":"8.84"},{"series":"4","x":"8","y":"8.47"},{"series":"4","x":"8","y":"7.04"},{"series":"4","x":"8","y":"5.25"},{"series":"4","x":"19","y":"12.5"},{"series":"4","x":"8","y":"5.56"},{"series":"4","x":"8","y":"7.91"},{"series":"4","x":"8","y":"6.89"}]'),g=U.map(({...p})=>c(p)),j=JSON.parse('[{"yield":"27","variety":"Manchuria","year":"1931","site":"University Farm"},{"yield":"48.86667","variety":"Manchuria","year":"1931","site":"Waseca"},{"yield":"27.43334","variety":"Manchuria","year":"1931","site":"Morris"},{"yield":"39.93333","variety":"Manchuria","year":"1931","site":"Crookston"},{"yield":"32.96667","variety":"Manchuria","year":"1931","site":"Grand Rapids"},{"yield":"28.96667","variety":"Manchuria","year":"1931","site":"Duluth"},{"yield":"43.06666","variety":"Glabron","year":"1931","site":"University Farm"},{"yield":"55.2","variety":"Glabron","year":"1931","site":"Waseca"},{"yield":"28.76667","variety":"Glabron","year":"1931","site":"Morris"},{"yield":"38.13333","variety":"Glabron","year":"1931","site":"Crookston"},{"yield":"29.13333","variety":"Glabron","year":"1931","site":"Grand Rapids"},{"yield":"29.66667","variety":"Glabron","year":"1931","site":"Duluth"},{"yield":"35.13333","variety":"Svansota","year":"1931","site":"University Farm"},{"yield":"47.33333","variety":"Svansota","year":"1931","site":"Waseca"},{"yield":"25.76667","variety":"Svansota","year":"1931","site":"Morris"},{"yield":"40.46667","variety":"Svansota","year":"1931","site":"Crookston"},{"yield":"29.66667","variety":"Svansota","year":"1931","site":"Grand Rapids"},{"yield":"25.7","variety":"Svansota","year":"1931","site":"Duluth"},{"yield":"39.9","variety":"Velvet","year":"1931","site":"University Farm"},{"yield":"50.23333","variety":"Velvet","year":"1931","site":"Waseca"},{"yield":"26.13333","variety":"Velvet","year":"1931","site":"Morris"},{"yield":"41.33333","variety":"Velvet","year":"1931","site":"Crookston"},{"yield":"23.03333","variety":"Velvet","year":"1931","site":"Grand Rapids"},{"yield":"26.3","variety":"Velvet","year":"1931","site":"Duluth"},{"yield":"36.56666","variety":"Trebi","year":"1931","site":"University Farm"},{"yield":"63.8333","variety":"Trebi","year":"1931","site":"Waseca"},{"yield":"43.76667","variety":"Trebi","year":"1931","site":"Morris"},{"yield":"46.93333","variety":"Trebi","year":"1931","site":"Crookston"},{"yield":"29.76667","variety":"Trebi","year":"1931","site":"Grand Rapids"},{"yield":"33.93333","variety":"Trebi","year":"1931","site":"Duluth"},{"yield":"43.26667","variety":"No. 457","year":"1931","site":"University Farm"},{"yield":"58.1","variety":"No. 457","year":"1931","site":"Waseca"},{"yield":"28.7","variety":"No. 457","year":"1931","site":"Morris"},{"yield":"45.66667","variety":"No. 457","year":"1931","site":"Crookston"},{"yield":"32.16667","variety":"No. 457","year":"1931","site":"Grand Rapids"},{"yield":"33.6","variety":"No. 457","year":"1931","site":"Duluth"},{"yield":"36.6","variety":"No. 462","year":"1931","site":"University Farm"},{"yield":"65.7667","variety":"No. 462","year":"1931","site":"Waseca"},{"yield":"30.36667","variety":"No. 462","year":"1931","site":"Morris"},{"yield":"48.56666","variety":"No. 462","year":"1931","site":"Crookston"},{"yield":"24.93334","variety":"No. 462","year":"1931","site":"Grand Rapids"},{"yield":"28.1","variety":"No. 462","year":"1931","site":"Duluth"},{"yield":"32.76667","variety":"Peatland","year":"1931","site":"University Farm"},{"yield":"48.56666","variety":"Peatland","year":"1931","site":"Waseca"},{"yield":"29.86667","variety":"Peatland","year":"1931","site":"Morris"},{"yield":"41.6","variety":"Peatland","year":"1931","site":"Crookston"},{"yield":"34.7","variety":"Peatland","year":"1931","site":"Grand Rapids"},{"yield":"32","variety":"Peatland","year":"1931","site":"Duluth"},{"yield":"24.66667","variety":"No. 475","year":"1931","site":"University Farm"},{"yield":"46.76667","variety":"No. 475","year":"1931","site":"Waseca"},{"yield":"22.6","variety":"No. 475","year":"1931","site":"Morris"},{"yield":"44.1","variety":"No. 475","year":"1931","site":"Crookston"},{"yield":"19.7","variety":"No. 475","year":"1931","site":"Grand Rapids"},{"yield":"33.06666","variety":"No. 475","year":"1931","site":"Duluth"},{"yield":"39.3","variety":"Wisconsin No. 38","year":"1931","site":"University Farm"},{"yield":"58.8","variety":"Wisconsin No. 38","year":"1931","site":"Waseca"},{"yield":"29.46667","variety":"Wisconsin No. 38","year":"1931","site":"Morris"},{"yield":"49.86667","variety":"Wisconsin No. 38","year":"1931","site":"Crookston"},{"yield":"34.46667","variety":"Wisconsin No. 38","year":"1931","site":"Grand Rapids"},{"yield":"31.6","variety":"Wisconsin No. 38","year":"1931","site":"Duluth"},{"yield":"26.9","variety":"Manchuria","year":"1932","site":"University Farm"},{"yield":"33.46667","variety":"Manchuria","year":"1932","site":"Waseca"},{"yield":"34.36666","variety":"Manchuria","year":"1932","site":"Morris"},{"yield":"32.96667","variety":"Manchuria","year":"1932","site":"Crookston"},{"yield":"22.13333","variety":"Manchuria","year":"1932","site":"Grand Rapids"},{"yield":"22.56667","variety":"Manchuria","year":"1932","site":"Duluth"},{"yield":"36.8","variety":"Glabron","year":"1932","site":"University Farm"},{"yield":"37.73333","variety":"Glabron","year":"1932","site":"Waseca"},{"yield":"35.13333","variety":"Glabron","year":"1932","site":"Morris"},{"yield":"26.16667","variety":"Glabron","year":"1932","site":"Crookston"},{"yield":"14.43333","variety":"Glabron","year":"1932","site":"Grand Rapids"},{"yield":"25.86667","variety":"Glabron","year":"1932","site":"Duluth"},{"yield":"27.43334","variety":"Svansota","year":"1932","site":"University Farm"},{"yield":"38.5","variety":"Svansota","year":"1932","site":"Waseca"},{"yield":"35.03333","variety":"Svansota","year":"1932","site":"Morris"},{"yield":"20.63333","variety":"Svansota","year":"1932","site":"Crookston"},{"yield":"16.63333","variety":"Svansota","year":"1932","site":"Grand Rapids"},{"yield":"22.23333","variety":"Svansota","year":"1932","site":"Duluth"},{"yield":"26.8","variety":"Velvet","year":"1932","site":"University Farm"},{"yield":"37.4","variety":"Velvet","year":"1932","site":"Waseca"},{"yield":"38.83333","variety":"Velvet","year":"1932","site":"Morris"},{"yield":"32.06666","variety":"Velvet","year":"1932","site":"Crookston"},{"yield":"32.23333","variety":"Velvet","year":"1932","site":"Grand Rapids"},{"yield":"22.46667","variety":"Velvet","year":"1932","site":"Duluth"},{"yield":"29.06667","variety":"Trebi","year":"1932","site":"University Farm"},{"yield":"49.2333","variety":"Trebi","year":"1932","site":"Waseca"},{"yield":"46.63333","variety":"Trebi","year":"1932","site":"Morris"},{"yield":"41.83333","variety":"Trebi","year":"1932","site":"Crookston"},{"yield":"20.63333","variety":"Trebi","year":"1932","site":"Grand Rapids"},{"yield":"30.6","variety":"Trebi","year":"1932","site":"Duluth"},{"yield":"26.43334","variety":"No. 457","year":"1932","site":"University Farm"},{"yield":"42.2","variety":"No. 457","year":"1932","site":"Waseca"},{"yield":"43.53334","variety":"No. 457","year":"1932","site":"Morris"},{"yield":"34.33333","variety":"No. 457","year":"1932","site":"Crookston"},{"yield":"19.46667","variety":"No. 457","year":"1932","site":"Grand Rapids"},{"yield":"22.7","variety":"No. 457","year":"1932","site":"Duluth"},{"yield":"25.56667","variety":"No. 462","year":"1932","site":"University Farm"},{"yield":"44.7","variety":"No. 462","year":"1932","site":"Waseca"},{"yield":"47","variety":"No. 462","year":"1932","site":"Morris"},{"yield":"30.53333","variety":"No. 462","year":"1932","site":"Crookston"},{"yield":"19.9","variety":"No. 462","year":"1932","site":"Grand Rapids"},{"yield":"22.5","variety":"No. 462","year":"1932","site":"Duluth"},{"yield":"28.06667","variety":"Peatland","year":"1932","site":"University Farm"},{"yield":"36.03333","variety":"Peatland","year":"1932","site":"Waseca"},{"yield":"43.2","variety":"Peatland","year":"1932","site":"Morris"},{"yield":"25.23333","variety":"Peatland","year":"1932","site":"Crookston"},{"yield":"26.76667","variety":"Peatland","year":"1932","site":"Grand Rapids"},{"yield":"31.36667","variety":"Peatland","year":"1932","site":"Duluth"},{"yield":"30","variety":"No. 475","year":"1932","site":"University Farm"},{"yield":"41.26667","variety":"No. 475","year":"1932","site":"Waseca"},{"yield":"44.23333","variety":"No. 475","year":"1932","site":"Morris"},{"yield":"32.13333","variety":"No. 475","year":"1932","site":"Crookston"},{"yield":"15.23333","variety":"No. 475","year":"1932","site":"Grand Rapids"},{"yield":"27.36667","variety":"No. 475","year":"1932","site":"Duluth"},{"yield":"38","variety":"Wisconsin No. 38","year":"1932","site":"University Farm"},{"yield":"58.16667","variety":"Wisconsin No. 38","year":"1932","site":"Waseca"},{"yield":"47.16667","variety":"Wisconsin No. 38","year":"1932","site":"Morris"},{"yield":"35.9","variety":"Wisconsin No. 38","year":"1932","site":"Crookston"},{"yield":"20.66667","variety":"Wisconsin No. 38","year":"1932","site":"Grand Rapids"},{"yield":"29.33333","variety":"Wisconsin No. 38","year":"1932","site":"Duluth"}]'),q=j.map(({...p})=>c(p)),z=i("h1",{id:"facets",tabindex:"-1"},[s("Facets "),i("a",{class:"header-anchor",href:"#facets","aria-label":'Permalink to "Facets"'},"​")],-1),L=i("p",null,[s("Faceting partitions data by ordinal or categorical value and then repeats a plot for each partition (each "),i("strong",null,"facet"),s("), producing "),i("a",{href:"https://en.wikipedia.org/wiki/Small_multiple",target:"_blank",rel:"noreferrer"},"small multiples"),s(" for comparison. Faceting is typically enabled by declaring the horizontal↔︎ facet channel "),i("strong",null,"fx"),s(", the vertical↕︎ facet channel "),i("strong",null,"fy"),s(", or both for two-dimensional faceting.")],-1),Y=i("a",{href:"https://hci.stanford.edu/courses/cs448b/papers/becker-trellis-jcgs.pdf",target:"_blank",rel:"noreferrer"},[s("Becker "),i("em",null,"et al.")],-1),J=i("strong",null,"fy",-1),$=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-trellis?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginRight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginLeft: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">110</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  x: {nice: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: {inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;categorical&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(barley, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yield&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;variety&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;site&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;year&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sort: {y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reduce: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;median&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This plot uses the <a href="./scales#sort-mark-option"><strong>sort</strong> mark option</a> to order the <em>y</em> and <em>fy</em> scale domains by descending median yield (the associated <em>x</em> values). Without this option, the domains would be sorted alphabetically.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Use the <a href="./../marks/frame">frame mark</a> for stronger visual separation of facets.</p></div>`,4),X=i("a",{href:"./../transforms/group"},"group transform",-1),H=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-trellis-anomaly?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginLeft: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">110</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  x: {nice: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: {inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {scheme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;spectral&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Change in yield&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tickFormat: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;+f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  facet: {marginRight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arrow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(barley, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x1: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;first&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x2: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;last&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      stroke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: ([</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x1 </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// year-over-year difference</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yield&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;variety&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;site&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yield&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      strokeWidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      sort: {y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-x1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-x1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reduce: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;median&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Here the sort order has changed slightly: the <em>y</em> and <em>fy</em> domains are sorted by the median <strong>x1</strong> values, which are the yields for 1931.</p></div><p>Faceting requires ordinal or categorical data because there are a discrete number of facets; the associated <em>fx</em> and <em>fy</em> scales are <a href="./scales#discrete-scales">band scales</a>. Quantitative or temporal data can be made ordinal by binning, say using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/floor" target="_blank" rel="noreferrer">Math.floor</a>. Or, use the <a href="./scales#scale-transforms"><strong>interval</strong> scale option</a> on the <em>fx</em> or <em>fy</em> scale. Below, we produce a <a href="./../marks/box">box plot</a> of the weights (in kilograms) of Olympic athletes, faceted by height binned at a 10cm (0.1 meter) interval.</p>`,4),Q=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-olympians-box-plot?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fy: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    tickFormat: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.1f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    interval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 10cm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    reverse: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">boxX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(olympians.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.height), {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;weight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you are interested in automatic faceting for quantitative data, please upvote <a href="https://github.com/observablehq/plot/issues/14" target="_blank" rel="noreferrer">#14</a>.</p></div><p>When both <strong>fx</strong> and <strong>fy</strong> channels are specified, two-dimensional faceting results, as in the faceted scatterplot of penguin culmen measurements below. The horizontal↔︎ facet shows sex (with the rightmost column representing penguins whose <em>sex</em> field is null, indicating missing data), while the vertical↕︎ facet shows species.</p>`,4),K=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-two-dimensional-faceting?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginRight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  facet: {label: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fx: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;species&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>You can mix-and-match faceted and non-faceted marks within the same plot. The non-faceted marks will be repeated across all facets. This is useful for decoration marks, such as a <a href="./../marks/frame">frame</a>, and also for context: below, the entire population of penguins is repeated in each facet as small gray dots, making it easier to see how each facet compares to the whole.</p>`,3),Z=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-non-faceted-marks?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginRight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  facet: {label: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;#aaa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fx: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;species&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Set the <a href="#mark-facet-options"><strong>facet</strong> mark option</a> to <em>exclude</em> to draw only the dots <em>not</em> in the current facet.</p></div><p>When there are many facets, facets may be small and hard to read; you may need to increase the plot’s <strong>width</strong> or <strong>height</strong>. Alternatively, you can wrap facets by computing a row and column number as <strong>fy</strong> and <strong>fx</strong>. Below, small multiples of varying unemployment counts across industries are shown in a three-column display.</p>`,4),ss=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-facet-wrap?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// number of facet columns</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> keys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d3.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">union</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(industries.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.industry)));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keys.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [key, i]));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(index.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    axis: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    y: {insetTop: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fx: {padding: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.03</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">areaY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(industries, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalizeY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;extent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unemployed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d.industry),</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d.industry)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(keys, {fx, fy, frameAnchor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;top-left&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dx: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dy: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})())</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you are interested in automatic facet wrapping, please upvote <a href="https://github.com/observablehq/plot/issues/277" target="_blank" rel="noreferrer">#277</a>.</p></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>This example uses an <a href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE" target="_blank" rel="noreferrer">immediately-invoked function expression (IIFE)</a> to declare local variables.</p></div><p>The above chart also demonstrates faceted annotations, using a <a href="./../marks/text">text mark</a> to label the facet in lieu of facet axes. Below, we apply a single text annotation to the <em>Adelie</em> facet by setting the <strong>fy</strong> channel to a single-element array parallel to the data.</p>`,5),is=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-annotated-facets?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginLeft: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marginRight: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: {label: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fy: {label: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">barX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {fy: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;species&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;island&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`While Chinstrap and Gentoo penguins were each observed on only one island, Adelie penguins were observed on all three islands.\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      fy: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Adelie&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      frameAnchor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;top-right&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      lineWidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dx: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dy: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="mark-facet-options" tabindex="-1">Mark facet options <a class="header-anchor" href="#mark-facet-options" aria-label="Permalink to &quot;Mark facet options&quot;">​</a></h2>`,3),as=i("strong",null,"fx",-1),es=i("strong",null,"fy",-1),ts=i("strong",null,"fx",-1),ns=i("strong",null,"fy",-1),ls=i("a",{href:"./transforms"},"mark’s transform",-1),hs=i("em",null,"i.e.",-1),rs=i("a",{href:"#plot-facet-options"},[i("strong",null,"facet"),s(" plot option")],-1),ps=n("<p>Faceting can be explicitly enabled or disabled on a mark with the <strong>facet</strong> option, which accepts the following values:</p><ul><li><em>auto</em> (default) - automatically determine if this mark should be faceted</li><li><em>include</em> (or true) - draw the subset of the mark’s data in the current facet</li><li><em>exclude</em> - draw the subset of the mark’s data <em>not</em> in the current facet</li><li><em>super</em> - draw this mark in a single frame that covers all facets</li><li>null (or false) - repeat this mark’s data across all facets (<em>i.e.</em>, no faceting)</li></ul><p>When mark-level faceting is used, the default <em>auto</em> setting is equivalent to <em>include</em>: the mark will be faceted if either the <strong>fx</strong> or <strong>fy</strong> channel option (or both) is specified. The null or false option will disable faceting, while <em>exclude</em> draws the subset of the mark’s data <em>not</em> in the current facet. When a mark uses <em>super</em> faceting, it is not allowed to use position scales (<em>x</em>, <em>y</em>, <em>fx</em>, or <em>fy</em>); <em>super</em> faceting is intended for decorations, such as labels and legends.</p>",3),ks=i("strong",null,"facetAnchor",-1),os=i("a",{id:"facetAnchor",class:"header-anchor",href:"#facetAnchor","aria-label":'Permalink to "facetAnchor"'},null,-1),Es=n('<ul><li>null - non-empty facets</li><li><em>top</em>, <em>right</em>, <em>bottom</em>, or <em>left</em> - the given side</li><li><em>top-empty</em>, <em>right-empty</em>, <em>bottom-empty</em>, or <em>left-empty</em> - adjacent empty facet or side</li><li><em>empty</em> - empty facets</li></ul><p>The <strong>facetAnchor</strong> option defaults to null for all marks except axis marks, whose default depends on the axis orientation and associated scale.</p><p>When using top-level faceting, if the mark data is parallel to the facet data (<em>i.e.</em>, it has the same length and order), but is not strictly equal (<code>===</code>), you can enable faceting by specifying the <strong>facet</strong> option to <em>include</em> (or equivalently true). Likewise you can disable faceting by setting the <strong>facet</strong> option to null or false. Finally, the <strong>facet</strong> option supports the <em>exclude</em> option to select all data points that are <em>not</em> part of the current facet, allowing “background” marks for context.</p><p>When top-level faceting is used, the default <em>auto</em> setting is equivalent to <em>include</em> when the mark data is strictly equal to the top-level facet data; otherwise it is equivalent to null. When the <em>include</em> or <em>exclude</em> facet mode is chosen, the mark data must be parallel to the top-level facet data: the data must have the same length and order. If the data are not parallel, then the wrong data may be shown in each facet. The default <em>auto</em> therefore requires strict equality (<code>===</code>) for safety, and using the facet data as mark data is recommended when using the <em>exclude</em> facet mode. (To construct parallel data safely, consider using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noreferrer"><em>array</em>.map</a> on the facet data.)</p><h2 id="plot-facet-options" tabindex="-1">Plot facet options <a class="header-anchor" href="#plot-facet-options" aria-label="Permalink to &quot;Plot facet options&quot;">​</a></h2><p>The <strong>facet</strong> plot option provides addition control over facet position scales and axes:</p><ul><li><strong>marginTop</strong> - the top margin</li><li><strong>marginRight</strong> - the right margin</li><li><strong>marginBottom</strong> - the bottom margin</li><li><strong>marginLeft</strong> - the left margin</li><li><strong>margin</strong> - shorthand for the four margins</li><li><strong>grid</strong> - if true, draw grid lines for each facet</li><li><strong>label</strong> - if null, disable default facet axis labels</li></ul><p>The <strong>facet</strong> margin options behave largely the same as the margin <a href="./plots">plot options</a>; the only difference is the positioning of the associated scale label for the <em>x</em> and <em>y</em> scales. Likewise, the <strong>grid</strong> and <strong>label</strong> options have the same meaning as the plot options, except the facet options only apply to the <em>fx</em> and <em>fy</em> scales.</p><p>The <strong>facet</strong> plot option is also an alternative to the <strong>fx</strong> and <strong>fy</strong> mark options. It is useful when multiple marks share the same data; the <strong>x</strong> and <strong>y</strong> facet channels are then shared by all marks that use the facet data. (Other marks will be repeated across facets.) For example, we can visualize the famous <a href="https://en.wikipedia.org/wiki/Anscombe&#39;s_quartet" target="_blank" rel="noreferrer">Anscombe’s quartet</a> as a scatterplot with horizontal facets.</p>',9),ds=n(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-anscombes-quartet?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  aspectRatio: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  facet: {data: anscombe, x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;series&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">line</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(anscombe, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(anscombe, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>For top-level faceting, these <strong>facet</strong> options determine the facets:</p><ul><li><strong>data</strong> - the data to be faceted</li><li><strong>x</strong> - the horizontal↔︎ position; bound to the <em>fx</em> scale</li><li><strong>y</strong> - the vertical↕︎ position; bound to the <em>fy</em> scale</li></ul><p>With top-level faceting, any mark that uses the specified facet data will be faceted by default, whereas marks that use different data will be repeated across all facets. Use the mark <strong>facet</strong> option to change the behavior.</p><h2 id="facet-scales" tabindex="-1">Facet scales <a class="header-anchor" href="#facet-scales" aria-label="Permalink to &quot;Facet scales&quot;">​</a></h2><p>When faceting, two additional <a href="./scales#discrete-scales">band scales</a> may be configured:</p><ul><li><em>fx</em> - the horizontal↔︎ position, a <em>band</em> scale</li><li><em>fy</em> - the vertical↕︎ position, a <em>band</em> scale</li></ul><p>You can adjust the space between facets using the <strong>padding</strong>, <strong>round</strong>, and <strong>align</strong> scale options.</p>`,9),fs=JSON.parse('{"title":"Facets","description":"","frontmatter":{},"headers":[],"relativePath":"features/facets.md","filePath":"features/facets.md"}'),ys={name:"features/facets.md"},vs=Object.assign(ys,{setup(p){const u=G([{weight:31,height:1.21,sex:"female"},{weight:170,height:2.21,sex:"male"}]),k=A({color:{type:"categorical"}}).range;return V(()=>{w("../data/athletes.csv",c).then(m=>u.value=m)}),(m,gs)=>{const l=B("PlotRender"),F=B("VersionBadge");return O(),I("div",null,[z,L,i("p",null,[s("For example, below we recreate the Trellis display (“reminiscent of garden trelliswork”) of "),Y,s(" using the dot’s "),J,s(" channel to declare vertical↕︎ facets, showing the yields of several varieties of barley across several sites for the years "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[0]}`})},"1931",4),s(" and "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[1]}`})},"1932",4),s(".")]),t(l,{options:{height:800,marginRight:90,marginLeft:110,grid:!0,x:{nice:!0},y:{inset:5},color:{type:"categorical"},marks:[h(),r(a(q),{x:"yield",y:"variety",fy:"site",stroke:"year",sort:{y:"-x",fy:"-x",reduce:"median"}})]}},null,8,["options"]),$,i("p",null,[s("The chart above reveals a likely data collection error: the years appear to be reversed for the Morris site as it is the only site where the yields in "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[1]}`})},"1932",4),s(" were higher than in "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[0]}`})},"1931",4),s(". The anomaly in Morris is more obvious if we use directed arrows to show the year-over-year change. The "),X,s(" groups the observations by site and variety to compute the change.")]),t(l,{defer:"",options:{height:800,marginLeft:110,grid:!0,x:{nice:!0},y:{inset:5},color:{scheme:"spectral",label:"Change in yield",tickFormat:"+f",legend:!0},facet:{marginRight:90},marks:[h(),P(a(q),C({x1:"first",x2:"last",stroke:([o,E])=>E-o},{x:"yield",y:"variety",fy:"site",stroke:"yield",strokeWidth:2,sort:{y:"-x1",fy:"-x1",reduce:"median"}}))]}},null,8,["options"]),H,t(l,{defer:"",options:{fy:{grid:!0,tickFormat:".1f",interval:.1,reverse:!0},marks:[N(u.value.filter(o=>o.height),{x:"weight",fy:"height"})]}},null,8,["options"]),Q,t(l,{defer:"",options:{grid:!0,marginRight:60,facet:{label:null},marks:[h(),r(a(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fx:"sex",fy:"species"})]}},null,8,["options"]),K,t(l,{defer:"",options:{grid:!0,marginRight:60,facet:{label:null},marks:[h(),r(a(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fill:"#aaa",r:1}),r(a(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fx:"sex",fy:"species"})]}},null,8,["options"]),Z,t(l,{defer:"",options:(()=>{const E=Array.from(D(a(x).map(e=>e.industry))),f=new Map(E.map((e,T)=>[e,T])),v=e=>f.get(e)%3,b=e=>Math.floor(f.get(e)/3);return{height:300,axis:null,y:{insetTop:10},fx:{padding:.03},marks:[S(a(x),W("extent",{x:"date",y:"unemployed",fx:e=>v(e.industry),fy:e=>b(e.industry)})),_(E,{fx:v,fy:b,frameAnchor:"top-left",dx:6,dy:6}),h()]}})()},null,8,["options"]),ss,t(l,{defer:"",options:{marginLeft:60,marginRight:60,grid:!0,y:{label:null},fy:{label:null},color:{legend:!0},marks:[R(a(d),C({x:"count"},{fy:"species",y:"island",fill:"sex"})),_(["While Chinstrap and Gentoo penguins were each observed on only one island, Adelie penguins were observed on all three islands."],{fy:["Adelie"],frameAnchor:"top-right",lineWidth:18,dx:-6,dy:6}),h()]}},null,8,["options"]),is,i("p",null,[s("Facets can be defined for each mark via the "),as,s(" or "),es,s(" channels. "),t(F,{version:"0.6.1"}),s(" The "),ts,s(" and "),ns,s(" channels are computed prior to the "),ls,s(", if any ("),hs,s(", facet channels are not transformed). Alternatively, the "),rs,s(" allows top-level faceting based on data.")]),ps,i("p",null,[s("The "),ks,s(" option"),os,s(),t(F,{version:"0.6.3"}),s(" controls the placement of the mark with respect to the facets. Based on the value, the mark will be displayed on:")]),Es,t(l,{options:{grid:!0,aspectRatio:.5,facet:{data:a(g),x:"series"},marks:[h(),M(a(g),{x:"x",y:"y"}),r(a(g),{x:"x",y:"y"})]}},null,8,["options"]),ds])}}});export{fs as __pageData,vs as default};
