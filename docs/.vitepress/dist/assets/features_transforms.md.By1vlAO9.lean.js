import{s as A,c as k,b as d,G as w,I as y,h as x,H as P,aF as q,y as E,M as u,n as D,w as S,m as I,aG as j}from"./chunks/theme.DAWdUpF4.js";import{J as c,m as V,p as z,G as f,c as N,L as e,q as s,a as i,t as _,S as F,s as b,a6 as a,o as O}from"./chunks/framework.Bev6ATEH.js";const R=a("",3),Y=a("",3),H=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-sorted-heatmap?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),X={class:"language-js vp-adaptive-theme"},G=s("button",{title:"Copy Code",class:"copy"},null,-1),W=s("span",{class:"lang"},"js",-1),L={class:"shiki shiki-themes github-light github-dark vp-code"},M=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")],-1),U=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  marginLeft: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"120"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")],-1),$=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  padding: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")],-1),J=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  y: {label: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"null"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},")],-1),K={class:"line"},Q=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  color: {scheme: ",-1),Z={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},ss=a("",5),is=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  marks: [")],-1),as=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"cell"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")],-1),ts=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      traffic,")],-1),es=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"group"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")],-1),ns=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        {fill: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"median"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},")],-1),ls=a("",1),hs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      )")],-1),rs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    )")],-1),os=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]")],-1),ps=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1),ks=a("",4),ds=a("",3),Es=a("",7),cs=s("em",null,"options",-1),gs=s("a",{href:"./../transforms/normalize"},"normalize transform",-1),ms=s("em",null,"sum",-1),ys=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-overlapping-relative-histogram?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),us={class:"language-js vp-adaptive-theme"},fs=s("button",{title:"Copy Code",class:"copy"},null,-1),_s=s("span",{class:"lang"},"js",-1),Fs={class:"shiki shiki-themes github-light github-dark vp-code"},bs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")],-1),vs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  y: {percent: "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},")],-1),Cs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  marks: [")],-1),Bs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rectY"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")],-1),Ts=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      olympians,")],-1),As=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"normalizeY"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")],-1),ws=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'        "sum"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// normalize each series by the sum per series")],-1),xs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"binX"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")],-1),Ps=a("",1),qs={class:"line"},Ds=a("",5),Ss={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},Is=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}",-1),js=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        )")],-1),Vs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      )")],-1),zs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    )")],-1),Ns=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]")],-1),Os=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1),Rs=a("",3),Ys=a("",6),Hs={id:"custom-initializers",tabindex:"-1"},Xs=s("a",{class:"header-anchor",href:"#custom-initializers","aria-label":'Permalink to "Custom initializers <VersionBadge version="0.5.0" />"'},"​",-1),Gs=a("",3),Ws={id:"transform",tabindex:"-1"},Ls=s("em",null,"options",-1),Ms=s("em",null,"transform",-1),Us=s("a",{class:"header-anchor",href:"#transform","aria-label":'Permalink to "transform(*options*, *transform*) <VersionBadge version="0.4.3" /> {#transform}"'},"​",-1),$s=a("",2),Js={id:"initializer",tabindex:"-1"},Ks=s("em",null,"options",-1),Qs=s("em",null,"initializer",-1),Zs=s("a",{class:"header-anchor",href:"#initializer","aria-label":'Permalink to "initializer(*options*, *initializer*) <VersionBadge version="0.5.0" /> {#initializer}"'},"​",-1),si=a("",7),ii={id:"column",tabindex:"-1"},ai=s("em",null,"source",-1),ti=s("a",{class:"header-anchor",href:"#column","aria-label":'Permalink to "column(*source*) <VersionBadge version="0.4.3" /> {#column}"'},"​",-1),ei=a("",3),ni={id:"identity",tabindex:"-1"},li=s("a",{class:"header-anchor",href:"#identity","aria-label":'Permalink to "identity <VersionBadge version="0.6.2" /> {#identity}"'},"​",-1),hi=a("",2),ri={id:"indexOf",tabindex:"-1"},oi=s("a",{class:"header-anchor",href:"#indexOf","aria-label":'Permalink to "indexOf <VersionBadge version="0.6.6" /> {#indexOf}"'},"​",-1),pi=a("",2),gi=JSON.parse('{"title":"Transforms","description":"","frontmatter":{},"headers":[],"relativePath":"features/transforms.md","filePath":"features/transforms.md"}'),ki={name:"features/transforms.md"},mi=Object.assign(ki,{setup(di){const g=c([]),r=c([]),o=c(["Saarbrücken-Neuhaus","Oldenburg (Holstein)","Holz","Göttelborn","Riegelsberg","Kastel","Neustadt i. H.-Süd","Nettersheim","Hasborn","Laufeld","Otzenhausen","Nonnweiler","Kirschheck","AS Eppelborn","Bierfeld","Von der Heydt","Illingen","Hetzerath","Groß Ippener","Bockel","Ladbergen","Dibbersen","Euskirchen/Bliesheim","Hürth","Lotte","Ascheberg","Bad Schwartau","Schloss Burg","Uphusen","HB-Silbersee","Barsbüttel","HB-Mahndorfer See","Glüsingen","HB-Weserbrücke","Hengsen","Köln-Nord","Hagen-Vorhalle","Unna"].map((t,p)=>({location:t,date:new Date(Date.UTC(2e3,0,1,p)),vehicles:(10+p)**2.382}))),v=V(()=>j().thresholds(80).value(t=>t.weight)(r.value)),m=A({color:{type:"categorical"}}).range;return z(()=>{k("../data/athletes.csv",d).then(t=>r.value=t),k("../data/bls-metro-unemployment.csv",d).then(t=>g.value=t),k("../data/traffic.csv",d).then(t=>o.value=t)}),(t,p)=>{const n=f("PlotRender"),l=f("VersionBadge");return O(),N("div",null,[R,e(n,{defer:"",options:{marginLeft:120,x:{label:"Vehicles per hour (thousands)",transform:h=>h/1e3},y:{label:null},marks:[w([0]),y(o.value,{x:"vehicles",y:"location",strokeOpacity:.3}),y(o.value,x({x:"median"},{x:"vehicles",y:"location",stroke:"var(--vp-c-red)",strokeWidth:4,sort:{y:"x"}}))]}},null,8,["options"]),Y,e(n,{defer:"",options:{marginLeft:120,padding:0,y:{label:null},color:{scheme:t.$dark?"turbo":"YlGnBu",legend:!0,zero:!0},marks:[P(o.value,q({fill:"median"},{x:h=>h.date.getUTCHours(),y:"location",fill:"vehicles",inset:.5,sort:{y:"fill"}}))]}},null,8,["options"]),H,s("div",X,[G,W,s("pre",L,[s("code",null,[M,i(`
`),U,i(`
`),$,i(`
`),J,i(`
`),s("span",K,[Q,s("span",Z,'"'+_(t.$dark?"turbo":"YlGnBu")+'"',1),ss]),i(`
`),is,i(`
`),as,i(`
`),ts,i(`
`),es,i(`
`),ns,i(`
`),ls,i(`
`),hs,i(`
`),rs,i(`
`),os,i(`
`),ps])])]),ks,e(n,{defer:"",mark:E(v.value,{x1:"x0",x2:"x1",y2:"length"}),options:{}},null,8,["mark"]),ds,e(n,{defer:"",mark:E(r.value,u({y:"count"},{x:"weight",fill:"sex"})),options:{color:{legend:!0}}},null,8,["mark"]),Es,s("p",null,[i("Transforms are composable: you can pass "),cs,i(" through more than one transform before passing it to a mark. For example, above it’s a bit difficult to compare the weight distribution by sex because there are fewer "),s("span",{style:F({borderBottom:`solid 2px ${b(m)[0]}`})},"female",4),i(" than "),s("span",{style:F({borderBottom:`solid 2px ${b(m)[1]}`})},"male",4),i(" athletes in the data. We can remove this effect using the "),gs,i(" with the "),ms,i(" reducer.")]),e(n,{defer:"",options:{y:{percent:!0},marks:[E(r.value,D("sum",u({y2:"count"},{x:"weight",fill:"sex",mixBlendMode:t.$dark?"screen":"multiply"})))]}},null,8,["options"]),ys,s("div",us,[fs,_s,s("pre",Fs,[s("code",null,[bs,i(`
`),vs,i(`
`),Cs,i(`
`),Bs,i(`
`),Ts,i(`
`),As,i(`
`),ws,i(`
`),xs,i(`
`),Ps,i(`
`),s("span",qs,[Ds,s("span",Ss,'"'+_(t.$dark?"screen":"multiply")+'"',1),Is]),i(`
`),js,i(`
`),Vs,i(`
`),zs,i(`
`),Ns,i(`
`),Os])])]),Rs,e(n,{defer:"",options:{y:{grid:!0,label:"Unemployment (%)"},color:{domain:[!1,!0],range:["#ccc","var(--vp-c-red)"]},marks:[S([0]),I(g.value,{x:"date",y:"unemployment",z:"division",transform:(h,C)=>({data:h,facets:C.map(B=>B.filter(T=>/, MI /.test(h[T].division)))})})]}},null,8,["options"]),Ys,s("h2",Hs,[i("Custom initializers "),e(l,{version:"0.5.0"}),i(),Xs]),Gs,s("h2",Ws,[i("transform("),Ls,i(", "),Ms,i(") "),e(l,{version:"0.4.3"}),i(),Us]),$s,s("h2",Js,[i("initializer("),Ks,i(", "),Qs,i(") "),e(l,{version:"0.5.0"}),i(),Zs]),si,s("h2",ii,[i("column("),ai,i(") "),e(l,{version:"0.4.3"}),i(),ti]),ei,s("h2",ni,[i("identity "),e(l,{version:"0.6.2"}),i(),li]),hi,s("h2",ri,[i("indexOf "),e(l,{version:"0.6.6"}),i(),oi]),pi])}}});export{gi as __pageData,mi as default};
