import{k as F,J as g,p as A,G as q,c as _,q as s,a as i,L as o,t as C,w as r,a8 as w,aa as d,a6 as e,o as f}from"./chunks/framework.Bev6ATEH.js";import{c as y,b as c,e as u,aJ as D,a as v,w as V,y as S,M as x,aK as I,G as j,aL as b,t as X,aM as Y}from"./chunks/theme.DAWdUpF4.js";const R={id:"pointer-transform",tabindex:"-1"},N=s("a",{class:"header-anchor",href:"#pointer-transform","aria-label":'Permalink to "Pointer transform <VersionBadge version="0.6.7" />"'},"​",-1),O=s("p",null,[i("The "),s("strong",null,"pointer transform"),i(" filters a mark interactively such that only the point closest to the pointer is rendered. It is typically used to show details on hover, often with a "),s("a",{href:"./../marks/tip"},"tip"),i(" or "),s("a",{href:"./crosshair"},"crosshair"),i(" mark, but it can be paired with any mark.")],-1),M=s("span",{style:{"border-bottom":"solid 2px var(--vp-c-red)"}},"red",-1),z={style:{"border-bottom":"solid 2px currentColor"}},U={class:"label-input"},L=e(`<div style="display:none;"><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, (pointered </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Plot.pointer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o)({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></div>`,1),$={key:0},J=e(`<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div>`,1),W=[J],G={key:1},H=e(`<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div>`,1),K=[H],Q=e('<p>The pointer transform is similar to the <a href="./../transforms/filter">filter</a> and <a href="./../transforms/select">select</a> transforms: it filters the mark’s index to show a subset of the data. The difference is that the pointer transform is <em>interactive</em>: it listens to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events" target="_blank" rel="noreferrer">pointer events</a> and re-renders the mark as the closest point changes. Since the mark is lazily rendered during interaction, it is fast: only the visible elements are rendered as needed. And, like the filter and select transforms, unfiltered channel values are incorporated into default scale domains.</p><p>The pointer transform supports both one- and two-dimensional pointing modes. The two-dimensional mode, <a href="#pointer">pointer</a>, is used above and is suitable for scatterplots and the general case: it finds the point closest to the pointer by measuring distance in <em>x</em> and <em>y</em>. The one-dimensional modes, <a href="#pointerX">pointerX</a> and <a href="#pointerY">pointerY</a>, in contrast only consider distance in one dimension; this is desirable when a chart has a “dominant” dimension, such as time in a time-series chart, the binned quantitative dimension in a histogram, or the categorical dimension of a bar chart.</p><p>Try the different modes on the line chart below to get a feel for their behavior.</p>',3),Z={class:"label-input"},ss={style:{"margin-left":"0.5em"}},is={style:{"margin-left":"0.5em"}},ts={style:{"margin-left":"0.5em"}},as=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-pointer-modes-x-y-and-xy?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),es={class:"language-js vp-adaptive-theme"},ns=s("button",{title:"Copy Code",class:"copy"},null,-1),ls=s("span",{class:"lang"},"js",-1),hs={class:"shiki shiki-themes github-light github-dark vp-code"},ps={class:"line"},os=e('<span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lineY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tip: </span>',7),rs={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},ks=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}).",-1),ds=s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot",-1),Es=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"()",-1),gs=s("p",null,[i("“One-dimensional” is a slight misnomer: the pointerX and pointerY transforms consider distance in both dimensions, but the distance along the non-dominant dimension is divided by 100. Below, the pointerX transform is applied to a multi-series line chart; the closest point in "),s("em",null,"x"),i(" is chosen, while "),s("em",null,"y"),i(" is used to “break ties” such that you can focus different series by moving the mouse vertically.")],-1),ys=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-multi-series-line-chart-interactive-tips?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruleY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lineY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(industries, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;unemployed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;industry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tip: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>One-dimensional pointing makes even small bars or rects easily hoverable. If you switch the histogram below to two-dimensional pointing, you must hover near a rect’s centroid (shown in <span style="border-bottom:solid 2px var(--vp-c-red);">red</span>) to trigger a tip, whereas one-dimensional pointing triggers the tip anywhere in the chart.</p>`,3),cs={class:"label-input"},us={style:{"margin-left":"0.5em"}},ms={style:{"margin-left":"0.5em"}},Fs=s("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-one-dimensional-pointing?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),_s={class:"language-js vp-adaptive-theme"},Cs=s("button",{title:"Copy Code",class:"copy"},null,-1),fs=s("span",{class:"lang"},"js",-1),vs={class:"shiki shiki-themes github-light github-dark vp-code"},bs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")],-1),Bs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  x: {label: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Daily volume (log₁₀)"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},")],-1),qs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  marks: [")],-1),xs={class:"line"},Ts=e('<span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rectY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">binX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d.Volume), thresholds: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, tip: </span>',17),Ps={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},As=s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})),",-1),ws=e('<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stackY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">binX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, {</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d.Volume), thresholds: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">40</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})))</span></span>',1),Ds=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]")],-1),Vs=s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1),Ss=e('<p>This reveals an important caveat: the pointer transform understands only points and not the arbitrary geometry of marks. By default, the pointer transform only focuses the closest point if it is within 40 pixels of the pointer (in either one or two dimensions, depending on the pointing mode). With large marks, there may be “dead spots” that do not trigger pointing even when the pointer is within the displayed mark. You can mitigate dead spots either by switching to one-dimensional pointing, if appropriate, or by setting the <strong>maxRadius</strong> option to increase the pointing distance cutoff.</p><p>Another caveat is that since the pointer transform only focuses one point at a time, if points are coincident (or nearly so), some points may not be focusable. In the future, the pointer transform might allow focusing multiple points simultaneously, or some method of cycling through nearby points. If you are interested in this feature, please upvote <a href="https://github.com/observablehq/plot/issues/1621" target="_blank" rel="noreferrer">#1621</a>.</p><p>The pointer transform will prefer the midpoint of the <strong>x1</strong> and <strong>x2</strong> channels, if present, to the <strong>x</strong> channel, and likewise for <strong>y1</strong>, <strong>y2</strong>, and <strong>y</strong>; this allows the pointer transform to be applied to a rect, bar, area, or other mark with paired channels. It also enables these marks to support the <strong>tip</strong> mark option. (If no <em>x</em> or <em>y</em> channels are specified, the pointer transform respects the <strong>frameAnchor</strong> option.)</p><p>The <strong>px</strong> and <strong>py</strong> channels may be used to specify pointing target positions independent of the displayed mark. Below, text in the top-left corner shows the focused date and closing price. The focused point is also highlighted with a red dot and rule.</p>',4),Is=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-pointer-target-position?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">160</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: {axis: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;right&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, nice: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lineY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruleX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointerX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointerX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;red&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointerX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({px: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, py: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dy: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">17</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, frameAnchor: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;top-left&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fontVariant: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tabular-nums&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Date \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">formatIsoDate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Date</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Close \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Close</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toFixed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;   &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)}))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>As the above chart shows, a plot can have multiple pointer transforms. Each pointer transform functions independently (with the exception of <em>click-to-stick</em>, described next), though we recommend configuring them with the same target positions and pointing mode so that the same point is focused across marks.</p><p>The pointer transform supports “click-to-stick”: clicking on the chart locks the currently-focused point until you click again. By locking the pointer, you can select text from the tip for copy and paste. If a plot has multiple pointer transforms, clicking will lock all pointer transforms.</p><p>The pointer transform emits an <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event" target="_blank" rel="noreferrer"><em>input</em> event</a> whenever the focused points changes, and sets the value of the plot element to the focused data. This allows you to use a plot as an <a href="https://observablehq.com/@observablehq/views" target="_blank" rel="noreferrer">Observable view</a> (viewof), or to register an <em>input</em> event listener to react to pointing.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plot</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;input&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(plot.value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h2 id="pointer-options" tabindex="-1">Pointer options <a class="header-anchor" href="#pointer-options" aria-label="Permalink to &quot;Pointer options&quot;">​</a></h2><p>The following options control the pointer transform:</p><ul><li><strong>px</strong> - the horizontal↔︎ target position; bound to the <em>x</em> scale</li><li><strong>py</strong> - the vertical↕︎ target position; bound to the <em>y</em> scale</li><li><strong>x</strong> - the fallback horizontal↔︎ target position; bound to the <em>x</em> scale</li><li><strong>y</strong> - the fallback vertical↕︎ target position; bound to the <em>y</em> scale</li><li><strong>x1</strong> - the starting horizontal↔︎ target position; bound to the <em>x</em> scale</li><li><strong>y1</strong> - the starting vertical↕︎ target position; bound to the <em>y</em> scale</li><li><strong>x2</strong> - the ending horizontal↔︎ target position; bound to the <em>x</em> scale</li><li><strong>y2</strong> - the ending vertical↕︎ target position; bound to the <em>y</em> scale</li><li><strong>maxRadius</strong> - the reach, or maximum distance, in pixels; defaults to 40</li><li><strong>frameAnchor</strong> - how to position the target within the frame; defaults to <em>middle</em></li></ul><p>To resolve the horizontal target position, the pointer transform applies the following order of precedence:</p><ol><li>the <strong>px</strong> channel, if present;</li><li>the midpoint of the <strong>x1</strong> and <strong>x2</strong> channels, if both are present;</li><li>the <strong>x</strong> channel, if present;</li><li>the <strong>x1</strong> channel, if present;</li><li>and lastly the position given by the <strong>frameAnchor</strong>.</li></ol><p>The same precedence applies to the <strong>py</strong>, <strong>y</strong>, <strong>y1</strong>, and <strong>y2</strong> channels.</p><h2 id="pointer" tabindex="-1">pointer(<em>options</em>) <a class="header-anchor" href="#pointer" aria-label="Permalink to &quot;pointer(*options*) {#pointer}&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_depth_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}))</span></span></code></pre></div><p>Applies the pointer render transform to the specified <em>options</em> to filter the mark index such that only the point closest to the pointer is rendered; the mark will re-render interactively in response to pointer events.</p><h2 id="pointerX" tabindex="-1">pointerX(<em>options</em>) <a class="header-anchor" href="#pointerX" aria-label="Permalink to &quot;pointerX(*options*) {#pointerX}&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aapl, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointerX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Close&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}))</span></span></code></pre></div><p>Like <a href="#pointer">pointer</a>, except the determination of the closest point considers mostly the <em>x</em> (horizontal↔︎) position; this should be used for plots where <em>x</em> is the dominant dimension, such as time in a time-series chart, the binned quantitative dimension in a histogram, or the categorical dimension of a bar chart.</p><h2 id="pointerY" tabindex="-1">pointerY(<em>options</em>) <a class="header-anchor" href="#pointerY" aria-label="Permalink to &quot;pointerY(*options*) {#pointerY}&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alphabet, Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pointerY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;frequency&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;letter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}))</span></span></code></pre></div><p>Like <a href="#pointer">pointer</a>, except the determination of the closest point considers mostly the <em>y</em> (vertical↕︎) position; this should be used for plots where <em>y</em> is the dominant dimension, such as time in a time-series chart, the binned quantitative dimension in a histogram, or the categorical dimension of a bar chart.</p>`,21),Ns=JSON.parse('{"title":"Pointer transform","description":"","frontmatter":{},"headers":[],"relativePath":"interactions/pointer.md","filePath":"interactions/pointer.md"}'),js={name:"interactions/pointer.md"},Os=Object.assign(js,{setup(Xs){const E=F(!0),l=g([]),B=g([]),T=g([]),m=g([]),h=F("x"),p=F("x");return A(()=>{y("../data/aapl.csv",c).then(n=>l.value=n),y("../data/athletes.csv",c).then(n=>T.value=n),y("../data/bls-industry-unemployment.csv",c).then(n=>B.value=n),y("../data/penguins.csv",c).then(n=>m.value=n)}),(n,a)=>{const P=q("VersionBadge"),k=q("PlotRender");return f(),_("div",null,[s("h1",R,[i("Pointer transform "),o(P,{version:"0.6.7"}),i(),N]),O,s("p",null,[i("To demonstrate, below the pointer transform filters a filled "),M,i(" dot behind a stroked "),s("span",z,C(n.$dark?"white":"black"),1),i(" dot. As you hover the chart, only the closest red dot to the pointer is rendered. If you remove the pointer transform by toggling the checkbox, all the red dots will be visible.")]),s("p",null,[s("label",U,[i(" Use pointer: "),r(s("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=t=>E.value=t)},null,512),[[w,E.value]])])]),o(k,{defer:"",options:{marks:[u(m.value,(E.value?D:t=>t)({x:"culmen_length_mm",y:"culmen_depth_mm",fill:"var(--vp-c-red)",r:8})),u(m.value,{x:"culmen_length_mm",y:"culmen_depth_mm"})]}},null,8,["options"]),L,E.value?(f(),_("div",$,W)):(f(),_("div",G,K)),Q,s("p",null,[s("span",Z,[i(" Pointing mode: "),s("label",ss,[r(s("input",{type:"radio",name:"linetip",value:"xy","onUpdate:modelValue":a[1]||(a[1]=t=>h.value=t)},null,512),[[d,h.value]]),i(" pointer")]),s("label",is,[r(s("input",{type:"radio",name:"linetip",value:"x","onUpdate:modelValue":a[2]||(a[2]=t=>h.value=t)},null,512),[[d,h.value]]),i(" pointerX")]),s("label",ts,[r(s("input",{type:"radio",name:"linetip",value:"y","onUpdate:modelValue":a[3]||(a[3]=t=>h.value=t)},null,512),[[d,h.value]]),i(" pointerY")])])]),o(k,{defer:"",mark:v(l.value,{x:"Date",y:"Close",tip:h.value}),options:{}},null,8,["mark"]),as,s("div",es,[ns,ls,s("pre",hs,[s("code",null,[s("span",ps,[os,s("span",rs,'"'+C(h.value)+'"',1),ks,ds,Es])])])]),gs,o(k,{defer:"",options:{marks:[V([0]),v(B.value,{x:"date",y:"unemployed",stroke:"industry",tip:"x"})]}},null,8,["options"]),ys,s("p",null,[s("span",cs,[i(" Pointing mode: "),s("label",us,[r(s("input",{type:"radio",name:"recttip",value:"xy","onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t)},null,512),[[d,p.value]]),i(" pointer")]),s("label",ms,[r(s("input",{type:"radio",name:"recttip",value:"x","onUpdate:modelValue":a[5]||(a[5]=t=>p.value=t)},null,512),[[d,p.value]]),i(" pointerX")])])]),o(k,{defer:"",options:{x:{label:"Daily volume (log₁₀)"},marks:[S(l.value,x({y:"count"},{x:t=>Math.log10(t.Volume),thresholds:40,tip:p.value})),u(l.value,I(x({y:"count"},{x:t=>Math.log10(t.Volume),thresholds:40,stroke:"var(--vp-c-red)"})))]}},null,8,["options"]),Fs,s("div",_s,[Cs,fs,s("pre",vs,[s("code",null,[bs,i(`
`),Bs,i(`
`),qs,i(`
`),s("span",xs,[Ts,s("span",Ps,'"'+C(p.value)+'"',1),As]),i(`
`),ws,i(`
`),Ds,i(`
`),Vs])])]),Ss,o(k,{defer:"",options:{height:160,y:{axis:"right",grid:!0,nice:!0},marks:[v(l.value,{x:"Date",y:"Close"}),j(l.value,b({x:"Date",py:"Close",stroke:"var(--vp-c-red)"})),u(l.value,b({x:"Date",y:"Close",stroke:"var(--vp-c-red)"})),X(l.value,b({px:"Date",py:"Close",dy:-17,frameAnchor:"top-left",fontVariant:"tabular-nums",text:t=>[`Date ${Y(t.Date)}`,`Close ${t.Close.toFixed(2)}`].join("   ")}))]}},null,8,["options"]),Is])}}});export{Ns as __pageData,Os as default};
