import{bm as C,c as h,b as p,bx as v,by as q,w as g,m as f,n as y,t as m,bz as B,G as x,h as _,e as z,bo as P}from"./chunks/theme.DAWdUpF4.js";import{J as c,p as T,G as u,c as A,L as r,s as E,q as s,a,a6 as d,o as S}from"./chunks/framework.Bev6ATEH.js";const D=s("h1",{id:"normalize-transform",tabindex:"-1"},[a("Normalize transform "),s("a",{class:"header-anchor",href:"#normalize-transform","aria-label":'Permalink to "Normalize transform"'},"​")],-1),j=s("p",null,[a("The "),s("strong",null,"normalize transform"),a(" is a specialized "),s("a",{href:"./map"},"map transform"),a(" that normalizes series values relative to some basis, say to convert absolute values into relative values. For example, here is an index chart — a type of multi-series line chart — showing the return of several stocks relative to their closing price on a particular date.")],-1),X=d("",6),Y=d("",7),I={id:"normalize",tabindex:"-1"},N=s("em",null,"basis",-1),V=s("a",{class:"header-anchor",href:"#normalize","aria-label":'Permalink to "normalize(*basis*) <VersionBadge version="0.2.3" /> {#normalize}"'},"​",-1),w=d("",12),G=JSON.parse('{"title":"Normalize transform","description":"","frontmatter":{},"headers":[],"relativePath":"transforms/normalize.md","filePath":"transforms/normalize.md"}'),O={name:"transforms/normalize.md"},J=Object.assign(O,{setup(M){const e=c([]),k=c([]),o=C("sum",{z:"state",x:"population",y:"state"});return T(()=>{Promise.all([h("../data/aapl.csv",p),h("../data/amzn.csv",p),h("../data/goog.csv",p),h("../data/ibm.csv",p)]).then(n=>{k.value=v(["AAPL","AMZN","GOOG","IBM"],n).flatMap(([l,i])=>i.map(t=>({Symbol:l,...t})))}),h("../data/us-population-state-age.csv",p).then(n=>{const l=n.columns.slice(1);e.value=Object.assign(l.flatMap(i=>n.map(t=>({state:t.name,age:i,population:t[i]}))),{ages:l})})}),(n,l)=>{const i=u("PlotRender"),t=u("VersionBadge");return S(),A("div",null,[D,j,r(i,{defer:"",options:{y:{type:"log",grid:!0,label:"Change in price (%)",tickFormat:(F=>b=>F((b-1)*100))(q("+d"))},marks:[g([1]),f(k.value,y({x:"Date",y:"Close",stroke:"Symbol"})),m(k.value,B(y({x:"Date",y:"Close",z:"Symbol",text:"Symbol",textAnchor:"start",dx:3})))]}},null,8,["options"]),X,r(i,{defer:"",options:{height:660,axis:null,grid:!0,x:{axis:"top",label:"Population (%)",percent:!0},color:{scheme:"spectral",domain:e.value.ages,legend:!0},marks:[x([0]),g(e.value,_({x1:"min",x2:"max"},{...E(o),sort:{y:"x1"}})),z(e.value,{...E(o),fill:"age",title:"age"}),m(e.value,P({...E(o),textAnchor:"end",dx:-6,text:"state"}))]}},null,8,["options"]),Y,s("h2",I,[a("normalize("),N,a(") "),r(t,{version:"0.2.3"}),a(),V]),w])}}});export{G as __pageData,J as default};
