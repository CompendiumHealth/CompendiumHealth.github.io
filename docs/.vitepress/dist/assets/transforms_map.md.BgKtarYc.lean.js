import{k as m,G as f,c as b,L as r,s as t,q as s,w as g,a9 as u,t as y,a as h,a6 as E,o as v}from"./chunks/framework.Bev6ATEH.js";import{w as c,a as n,b2 as k,aH as C,l as _,L as q,j as B,bW as F,b3 as d}from"./chunks/theme.DAWdUpF4.js";import{a as e}from"./chunks/aapl.DY7i4a9z.js";const x=s("h1",{id:"map-transform",tabindex:"-1"},[h("Map transform "),s("a",{class:"header-anchor",href:"#map-transform","aria-label":'Permalink to "Map transform"'},"​")],-1),w=s("p",null,[h("The "),s("strong",null,"map transform"),h(" groups data into series and then transforms each series’ values, say to normalize them relative to some basis or to apply a moving average. For example, below the map transform computes a cumulative sum ("),s("em",null,"cumsum"),h(") of a series of random numbers sampled from a normal distribution — in other words, a random walk.")],-1),P=E("",3),T=E("",8),Y={class:"label-input"},j=s("span",null,"Window size (n):",-1),S={style:{"font-variant-numeric":"tabular-nums"}},D={class:"label-input"},V=s("span",null,"Radius (k):",-1),A={style:{"font-variant-numeric":"tabular-nums"}},N=E("",17),L=JSON.parse('{"title":"Map transform","description":"","frontmatter":{},"headers":[],"relativePath":"transforms/map.md","filePath":"transforms/map.md"}'),I={name:"transforms/map.md"},U=Object.assign(I,{setup(O){const a=m(20),i=m(2);return(X,l)=>{const p=f("PlotRender");return v(),b("div",null,[x,w,r(p,{options:{marks:[c([0]),n({length:600},k("cumsum",{y:C.source(_(42))()}))]}},null,8,["options"]),P,r(p,{options:{marks:[c([0,1]),n(t(e),k("quantile",{x:"Date",y:"Volume",strokeOpacity:.2})),n(t(e),q(30,k("quantile",{x:"Date",y:"Volume"})))]}},null,8,["options"]),T,s("p",null,[s("label",Y,[j,g(s("input",{type:"range","onUpdate:modelValue":l[0]||(l[0]=o=>a.value=o),min:"1",max:"100",step:"1"},null,512),[[u,a.value,void 0,{number:!0}]]),s("span",S,y(a.value.toLocaleString("en-US")),1)]),s("label",D,[V,g(s("input",{type:"range","onUpdate:modelValue":l[1]||(l[1]=o=>i.value=o),min:"0",max:"10",step:"0.1"},null,512),[[u,i.value,void 0,{number:!0}]]),s("span",A,y(i.value.toLocaleString("en-US")),1)])]),r(p,{defer:"",options:{y:{grid:!0},marks:[B(t(e),F({y1:d({n:a.value,k:-i.value}),y2:d({n:a.value,k:i.value})},{x:"Date",y:"Close",fillOpacity:.2})),n(t(e),F({y:d({n:a.value})},{x:"Date",y:"Close",stroke:"var(--vp-c-blue)"})),n(t(e),{x:"Date",y:"Close",strokeWidth:1})]}},null,8,["options"]),N])}}});export{L as __pageData,U as default};
