import{c as l,b as o,e as h,w as E}from"./chunks/theme.DAWdUpF4.js";import{J as r,p as m,G as c,c as y,q as i,a as n,L as e,a6 as s,o as u}from"./chunks/framework.Bev6ATEH.js";const _={id:"legends",tabindex:"-1"},f=i("a",{class:"header-anchor",href:"#legends","aria-label":'Permalink to "Legends <VersionBadge version="0.3.0" />"'},"​",-1),b=s('<p>Plot can generate <strong>legends</strong> for <em>color</em>, <em>opacity</em>, and <em>symbol</em> <a href="./scales">scales</a>. For example, the scatterplot below of body measurements of Olympic athletes includes a legend for its <em>color</em> scale, allowing the meaning of color to be interpreted by the reader. (The axes similarly document the meaning of the <em>x</em> and <em>y</em> position scales.)</p>',1),F=s(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-olympians-scatterplot?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(olympians, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;weight&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;height&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>The legend above is a <em>swatches</em> legend because the <em>color</em> scale is <em>ordinal</em> (with a <em>categorical</em> scheme). When the <em>color</em> scale is continuous, a <em>ramp</em> legend with a smooth gradient is generated instead. The plot below of global average surface temperature (<a href="https://data.giss.nasa.gov/gistemp/" target="_blank" rel="noreferrer">GISTEMP</a>) uses a <em>diverging</em> <em>color</em> scale to indicate the deviation from the 1951–1980 average in degrees Celsius.</p>`,3),v=s(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-diverging-color-scatterplot?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    scheme: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BuRd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ruleY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(gistemp, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Anomaly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Anomaly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>When an ordinal <em>color</em> scale is used redundantly with a <em>symbol</em> scale, the <em>symbol</em> legend will incorporate the color encoding. This is more accessible than using color alone, particularly for readers with color vision deficiency.</p>`,3),C=s(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-symbol-channel?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  x: {label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Body mass (g)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: {label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Flipper length (mm)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  symbol: {legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;body_mass_g&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flipper_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;species&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, symbol: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;species&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Plot does not yet generate legends for the <em>r</em> (radius) scale or the <em>length</em> scale. If you are interested in this feature, please upvote <a href="https://github.com/observablehq/plot/issues/236" target="_blank" rel="noreferrer">#236</a>. In the meantime, you can implement a legend using marks as demonstrated in the <a href="https://observablehq.com/@observablehq/plot-spike" target="_blank" rel="noreferrer">spike map</a> example.</p><h2 id="legend-options" tabindex="-1">Legend options <a class="header-anchor" href="#legend-options" aria-label="Permalink to &quot;Legend options&quot;">​</a></h2><p>If the <strong>legend</strong> <a href="./scales#scale-options">scale option</a> is true, the default legend will be produced for the scale; otherwise, the meaning of the <strong>legend</strong> option depends on the scale: for quantitative color scales, it defaults to <em>ramp</em> but may be set to <em>swatches</em> for a discrete scale (most commonly for <em>threshold</em> color scales); for <em>ordinal</em> <em>color</em> scales and <em>symbol</em> scales, only the <em>swatches</em> value is supported.</p><p>Categorical and ordinal color legends are rendered as swatches, unless the <strong>legend</strong> option is set to <em>ramp</em>. The swatches can be configured with the following options:</p>`,6),T=s("<li><strong>tickFormat</strong> - a format function for the labels</li><li><strong>swatchSize</strong> - the size of the swatch (if square)</li><li><strong>swatchWidth</strong> - the swatches’ width</li><li><strong>swatchHeight</strong> - the swatches’ height</li><li><strong>columns</strong> - the number of swatches per row</li><li><strong>marginLeft</strong> - the legend’s left margin</li><li><strong>className</strong> - a class name, that defaults to a randomly generated string scoping the styles</li>",7),w=i("strong",null,"opacity",-1),q=i("li",null,[i("strong",null,"width"),n(" - the legend’s width (in pixels)")],-1),B=s('<p>Symbol legends are rendered as swatches and support the options above in addition to the following options:</p><ul><li><strong>fill</strong> - the symbol fill color</li><li><strong>fillOpacity</strong> - the symbol fill opacity; defaults to 1</li><li><strong>stroke</strong> - the symbol stroke color</li><li><strong>strokeOpacity</strong> - the symbol stroke opacity; defaults to 1</li><li><strong>strokeWidth</strong> - the symbol stroke width; defaults to 1.5</li><li><strong>r</strong> - the symbol radius; defaults to 4.5 pixels</li></ul><p>The <strong>fill</strong> and <strong>stroke</strong> symbol legend options can be specified as “color” to apply the color scale when the symbol scale is a redundant encoding. The <strong>fill</strong> defaults to none. The <strong>stroke</strong> defaults to currentColor if the fill is none, and to none otherwise. The <strong>fill</strong> and <strong>stroke</strong> options may also be inherited from the corresponding options on an associated dot mark.</p><p>Continuous color legends are rendered as a ramp, and can be configured with the following options:</p><ul><li><strong>label</strong> - the scale’s label</li><li><strong>ticks</strong> - the desired number of ticks, or an array of tick values</li><li><strong>tickFormat</strong> - a format function for the legend’s ticks</li><li><strong>tickSize</strong> - the tick size</li><li><strong>round</strong> - if true (default), round tick positions to pixels</li><li><strong>width</strong> - the legend’s width</li><li><strong>height</strong> - the legend’s height</li><li><strong>marginTop</strong> - the legend’s top margin</li><li><strong>marginRight</strong> - the legend’s right margin</li><li><strong>marginBottom</strong> - the legend’s bottom margin</li><li><strong>marginLeft</strong> - the legend’s left margin</li><li><strong>opacity</strong> - the ramp’s fill opacity</li></ul><p>The <strong>style</strong> legend option allows custom styles to override Plot’s defaults; it has the same behavior as in Plot’s top-level <a href="./plots">plot options</a>. The <strong>className</strong> option is suffixed with <em>-ramp</em> or <em>-swatches</em>, reflecting the <strong>legend</strong> type.</p><h2 id="legend" tabindex="-1">legend(<em>options</em>) <a class="header-anchor" href="#legend" aria-label="Permalink to &quot;legend(*options*) {#legend}&quot;">​</a></h2><p>Renders a standalone legend for the scale defined by the given <em>options</em> object, returning a SVG or HTML figure element. This element can then be inserted into the page as described in the <a href="./../getting-started">getting started guide</a>. The <em>options</em> object must define at least one scale; see <a href="./scales">scale options</a> for how to define a scale.</p><p>For example, here is a <em>ramp</em> legend of a <em>linear</em> <em>color</em> scale with the default domain of [0, 1] and default scheme <em>turbo</em>:</p>',9),P=s('<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">legend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({color: {type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;linear&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}})</span></span></code></pre></div><p>The <em>options</em> object may also include any additional legend options described in the previous section. For example, to make the above legend slightly wider:</p>',2),S=s('<div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">legend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({width: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">320</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, color: {type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;linear&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}})</span></span></code></pre></div>',1),N=JSON.parse('{"title":"Legends","description":"","frontmatter":{},"headers":[],"relativePath":"features/legends.md","filePath":"features/legends.md"}'),A={name:"features/legends.md"},R=Object.assign(A,{setup(x){const p=r([]),d=r([{weight:31,height:1.21,sex:"female"},{weight:170,height:2.21,sex:"male"}]),g=r([{Date:new Date("1880-01-01"),Anomaly:-.78},{Date:new Date("2016-12-01"),Anomaly:1.35}]);return m(()=>{l("../data/athletes.csv",o).then(t=>d.value=t),l("../data/gistemp.csv",o).then(t=>g.value=t),l("../data/penguins.csv",o).then(t=>p.value=t)}),(t,V)=>{const k=c("VersionBadge"),a=c("PlotRender");return u(),y("div",null,[i("h1",_,[n("Legends "),e(k,{version:"0.3.0"}),n(),f]),b,e(a,{defer:"",options:{color:{legend:!0},marks:[h(d.value,{x:"weight",y:"height",stroke:"sex"})]}},null,8,["options"]),F,e(a,{defer:"",options:{color:{scheme:"BuRd",legend:!0},marks:[E([0]),h(g.value,{x:"Date",y:"Anomaly",stroke:"Anomaly"})]}},null,8,["options"]),v,e(a,{defer:"",options:{grid:!0,x:{label:"Body mass (g)"},y:{label:"Flipper length (mm)"},symbol:{legend:!0},marks:[h(p.value,{x:"body_mass_g",y:"flipper_length_mm",stroke:"species",symbol:"species"})]}},null,8,["options"]),C,i("ul",null,[T,i("li",null,[w,n(" - the swatch fill opacity "),e(k,{version:"0.6.5"})]),q]),B,e(a,{options:{color:{type:"linear"}},defer:"",method:"legend"}),P,e(a,{options:{width:320,color:{type:"linear"}},defer:"",method:"legend"}),S])}}});export{N as __pageData,R as default};
