import{J as F,m as q,k as _,p as V,G as T,c as j,q as i,a as s,L as l,s as n,w as m,a9 as C,t as c,a6 as e,o as O}from"./chunks/framework.Bev6ATEH.js";import{b,c as I,A as N,z as R,bh as a,e as g,B as x,f,bi as M}from"./chunks/theme.DAWdUpF4.js";import{f as L}from"./chunks/feature.DXDMwmIR.js";import{m as U}from"./chunks/mesh.DUGB6pHu.js";import{p as d}from"./chunks/penguins.C-n8z74Q.js";const G=JSON.parse('[{"eruptions":"3.600","waiting":"79"},{"eruptions":"1.800","waiting":"54"},{"eruptions":"3.333","waiting":"74"},{"eruptions":"2.283","waiting":"62"},{"eruptions":"4.533","waiting":"85"},{"eruptions":"2.883","waiting":"55"},{"eruptions":"4.700","waiting":"88"},{"eruptions":"3.600","waiting":"85"},{"eruptions":"1.950","waiting":"51"},{"eruptions":"4.350","waiting":"85"},{"eruptions":"1.833","waiting":"54"},{"eruptions":"3.917","waiting":"84"},{"eruptions":"4.200","waiting":"78"},{"eruptions":"1.750","waiting":"47"},{"eruptions":"4.700","waiting":"83"},{"eruptions":"2.167","waiting":"52"},{"eruptions":"1.750","waiting":"62"},{"eruptions":"4.800","waiting":"84"},{"eruptions":"1.600","waiting":"52"},{"eruptions":"4.250","waiting":"79"},{"eruptions":"1.800","waiting":"51"},{"eruptions":"1.750","waiting":"47"},{"eruptions":"3.450","waiting":"78"},{"eruptions":"3.067","waiting":"69"},{"eruptions":"4.533","waiting":"74"},{"eruptions":"3.600","waiting":"83"},{"eruptions":"1.967","waiting":"55"},{"eruptions":"4.083","waiting":"76"},{"eruptions":"3.850","waiting":"78"},{"eruptions":"4.433","waiting":"79"},{"eruptions":"4.300","waiting":"73"},{"eruptions":"4.467","waiting":"77"},{"eruptions":"3.367","waiting":"66"},{"eruptions":"4.033","waiting":"80"},{"eruptions":"3.833","waiting":"74"},{"eruptions":"2.017","waiting":"52"},{"eruptions":"1.867","waiting":"48"},{"eruptions":"4.833","waiting":"80"},{"eruptions":"1.833","waiting":"59"},{"eruptions":"4.783","waiting":"90"},{"eruptions":"4.350","waiting":"80"},{"eruptions":"1.883","waiting":"58"},{"eruptions":"4.567","waiting":"84"},{"eruptions":"1.750","waiting":"58"},{"eruptions":"4.533","waiting":"73"},{"eruptions":"3.317","waiting":"83"},{"eruptions":"3.833","waiting":"64"},{"eruptions":"2.100","waiting":"53"},{"eruptions":"4.633","waiting":"82"},{"eruptions":"2.000","waiting":"59"},{"eruptions":"4.800","waiting":"75"},{"eruptions":"4.716","waiting":"90"},{"eruptions":"1.833","waiting":"54"},{"eruptions":"4.833","waiting":"80"},{"eruptions":"1.733","waiting":"54"},{"eruptions":"4.883","waiting":"83"},{"eruptions":"3.717","waiting":"71"},{"eruptions":"1.667","waiting":"64"},{"eruptions":"4.567","waiting":"77"},{"eruptions":"4.317","waiting":"81"},{"eruptions":"2.233","waiting":"59"},{"eruptions":"4.500","waiting":"84"},{"eruptions":"1.750","waiting":"48"},{"eruptions":"4.800","waiting":"82"},{"eruptions":"1.817","waiting":"60"},{"eruptions":"4.400","waiting":"92"},{"eruptions":"4.167","waiting":"78"},{"eruptions":"4.700","waiting":"78"},{"eruptions":"2.067","waiting":"65"},{"eruptions":"4.700","waiting":"73"},{"eruptions":"4.033","waiting":"82"},{"eruptions":"1.967","waiting":"56"},{"eruptions":"4.500","waiting":"79"},{"eruptions":"4.000","waiting":"71"},{"eruptions":"1.983","waiting":"62"},{"eruptions":"5.067","waiting":"76"},{"eruptions":"2.017","waiting":"60"},{"eruptions":"4.567","waiting":"78"},{"eruptions":"3.883","waiting":"76"},{"eruptions":"3.600","waiting":"83"},{"eruptions":"4.133","waiting":"75"},{"eruptions":"4.333","waiting":"82"},{"eruptions":"4.100","waiting":"70"},{"eruptions":"2.633","waiting":"65"},{"eruptions":"4.067","waiting":"73"},{"eruptions":"4.933","waiting":"88"},{"eruptions":"3.950","waiting":"76"},{"eruptions":"4.517","waiting":"80"},{"eruptions":"2.167","waiting":"48"},{"eruptions":"4.000","waiting":"86"},{"eruptions":"2.200","waiting":"60"},{"eruptions":"4.333","waiting":"90"},{"eruptions":"1.867","waiting":"50"},{"eruptions":"4.817","waiting":"78"},{"eruptions":"1.833","waiting":"63"},{"eruptions":"4.300","waiting":"72"},{"eruptions":"4.667","waiting":"84"},{"eruptions":"3.750","waiting":"75"},{"eruptions":"1.867","waiting":"51"},{"eruptions":"4.900","waiting":"82"},{"eruptions":"2.483","waiting":"62"},{"eruptions":"4.367","waiting":"88"},{"eruptions":"2.100","waiting":"49"},{"eruptions":"4.500","waiting":"83"},{"eruptions":"4.050","waiting":"81"},{"eruptions":"1.867","waiting":"47"},{"eruptions":"4.700","waiting":"84"},{"eruptions":"1.783","waiting":"52"},{"eruptions":"4.850","waiting":"86"},{"eruptions":"3.683","waiting":"81"},{"eruptions":"4.733","waiting":"75"},{"eruptions":"2.300","waiting":"59"},{"eruptions":"4.900","waiting":"89"},{"eruptions":"4.417","waiting":"79"},{"eruptions":"1.700","waiting":"59"},{"eruptions":"4.633","waiting":"81"},{"eruptions":"2.317","waiting":"50"},{"eruptions":"4.600","waiting":"85"},{"eruptions":"1.817","waiting":"59"},{"eruptions":"4.417","waiting":"87"},{"eruptions":"2.617","waiting":"53"},{"eruptions":"4.067","waiting":"69"},{"eruptions":"4.250","waiting":"77"},{"eruptions":"1.967","waiting":"56"},{"eruptions":"4.600","waiting":"88"},{"eruptions":"3.767","waiting":"81"},{"eruptions":"1.917","waiting":"45"},{"eruptions":"4.500","waiting":"82"},{"eruptions":"2.267","waiting":"55"},{"eruptions":"4.650","waiting":"90"},{"eruptions":"1.867","waiting":"45"},{"eruptions":"4.167","waiting":"83"},{"eruptions":"2.800","waiting":"56"},{"eruptions":"4.333","waiting":"89"},{"eruptions":"1.833","waiting":"46"},{"eruptions":"4.383","waiting":"82"},{"eruptions":"1.883","waiting":"51"},{"eruptions":"4.933","waiting":"86"},{"eruptions":"2.033","waiting":"53"},{"eruptions":"3.733","waiting":"79"},{"eruptions":"4.233","waiting":"81"},{"eruptions":"2.233","waiting":"60"},{"eruptions":"4.533","waiting":"82"},{"eruptions":"4.817","waiting":"77"},{"eruptions":"4.333","waiting":"76"},{"eruptions":"1.983","waiting":"59"},{"eruptions":"4.633","waiting":"80"},{"eruptions":"2.017","waiting":"49"},{"eruptions":"5.100","waiting":"96"},{"eruptions":"1.800","waiting":"53"},{"eruptions":"5.033","waiting":"77"},{"eruptions":"4.000","waiting":"77"},{"eruptions":"2.400","waiting":"65"},{"eruptions":"4.600","waiting":"81"},{"eruptions":"3.567","waiting":"71"},{"eruptions":"4.000","waiting":"70"},{"eruptions":"4.500","waiting":"81"},{"eruptions":"4.083","waiting":"93"},{"eruptions":"1.800","waiting":"53"},{"eruptions":"3.967","waiting":"89"},{"eruptions":"2.200","waiting":"45"},{"eruptions":"4.150","waiting":"86"},{"eruptions":"2.000","waiting":"58"},{"eruptions":"3.833","waiting":"78"},{"eruptions":"3.500","waiting":"66"},{"eruptions":"4.583","waiting":"76"},{"eruptions":"2.367","waiting":"63"},{"eruptions":"5.000","waiting":"88"},{"eruptions":"1.933","waiting":"52"},{"eruptions":"4.617","waiting":"93"},{"eruptions":"1.917","waiting":"49"},{"eruptions":"2.083","waiting":"57"},{"eruptions":"4.583","waiting":"77"},{"eruptions":"3.333","waiting":"68"},{"eruptions":"4.167","waiting":"81"},{"eruptions":"4.333","waiting":"81"},{"eruptions":"4.500","waiting":"73"},{"eruptions":"2.417","waiting":"50"},{"eruptions":"4.000","waiting":"85"},{"eruptions":"4.167","waiting":"74"},{"eruptions":"1.883","waiting":"55"},{"eruptions":"4.583","waiting":"77"},{"eruptions":"4.250","waiting":"83"},{"eruptions":"3.767","waiting":"83"},{"eruptions":"2.033","waiting":"51"},{"eruptions":"4.433","waiting":"78"},{"eruptions":"4.083","waiting":"84"},{"eruptions":"1.833","waiting":"46"},{"eruptions":"4.417","waiting":"83"},{"eruptions":"2.183","waiting":"55"},{"eruptions":"4.800","waiting":"81"},{"eruptions":"1.833","waiting":"57"},{"eruptions":"4.800","waiting":"76"},{"eruptions":"4.100","waiting":"84"},{"eruptions":"3.966","waiting":"77"},{"eruptions":"4.233","waiting":"81"},{"eruptions":"3.500","waiting":"87"},{"eruptions":"4.366","waiting":"77"},{"eruptions":"2.250","waiting":"51"},{"eruptions":"4.667","waiting":"78"},{"eruptions":"2.100","waiting":"60"},{"eruptions":"4.350","waiting":"82"},{"eruptions":"4.133","waiting":"91"},{"eruptions":"1.867","waiting":"53"},{"eruptions":"4.600","waiting":"78"},{"eruptions":"1.783","waiting":"46"},{"eruptions":"4.367","waiting":"77"},{"eruptions":"3.850","waiting":"84"},{"eruptions":"1.933","waiting":"49"},{"eruptions":"4.500","waiting":"83"},{"eruptions":"2.383","waiting":"71"},{"eruptions":"4.700","waiting":"80"},{"eruptions":"1.867","waiting":"49"},{"eruptions":"3.833","waiting":"75"},{"eruptions":"3.417","waiting":"64"},{"eruptions":"4.233","waiting":"76"},{"eruptions":"2.400","waiting":"53"},{"eruptions":"4.800","waiting":"94"},{"eruptions":"2.000","waiting":"55"},{"eruptions":"4.150","waiting":"76"},{"eruptions":"1.867","waiting":"50"},{"eruptions":"4.267","waiting":"82"},{"eruptions":"1.750","waiting":"54"},{"eruptions":"4.483","waiting":"75"},{"eruptions":"4.000","waiting":"78"},{"eruptions":"4.117","waiting":"79"},{"eruptions":"4.083","waiting":"78"},{"eruptions":"4.267","waiting":"78"},{"eruptions":"3.917","waiting":"70"},{"eruptions":"4.550","waiting":"79"},{"eruptions":"4.083","waiting":"70"},{"eruptions":"2.417","waiting":"54"},{"eruptions":"4.183","waiting":"86"},{"eruptions":"2.217","waiting":"50"},{"eruptions":"4.450","waiting":"90"},{"eruptions":"1.883","waiting":"54"},{"eruptions":"1.850","waiting":"54"},{"eruptions":"4.283","waiting":"77"},{"eruptions":"3.950","waiting":"79"},{"eruptions":"2.333","waiting":"64"},{"eruptions":"4.150","waiting":"75"},{"eruptions":"2.350","waiting":"47"},{"eruptions":"4.933","waiting":"86"},{"eruptions":"2.900","waiting":"63"},{"eruptions":"4.583","waiting":"85"},{"eruptions":"3.833","waiting":"82"},{"eruptions":"2.083","waiting":"57"},{"eruptions":"4.367","waiting":"82"},{"eruptions":"2.133","waiting":"67"},{"eruptions":"4.350","waiting":"74"},{"eruptions":"2.200","waiting":"54"},{"eruptions":"4.450","waiting":"83"},{"eruptions":"3.567","waiting":"73"},{"eruptions":"4.500","waiting":"73"},{"eruptions":"4.150","waiting":"88"},{"eruptions":"3.817","waiting":"80"},{"eruptions":"3.917","waiting":"71"},{"eruptions":"4.450","waiting":"83"},{"eruptions":"2.000","waiting":"56"},{"eruptions":"4.283","waiting":"79"},{"eruptions":"4.767","waiting":"78"},{"eruptions":"4.533","waiting":"84"},{"eruptions":"1.850","waiting":"58"},{"eruptions":"4.250","waiting":"83"},{"eruptions":"1.983","waiting":"43"},{"eruptions":"2.250","waiting":"60"},{"eruptions":"4.750","waiting":"75"},{"eruptions":"4.117","waiting":"81"},{"eruptions":"2.150","waiting":"46"},{"eruptions":"4.417","waiting":"90"},{"eruptions":"1.817","waiting":"46"},{"eruptions":"4.467","waiting":"74"}]'),h=G.map(({...v})=>b(v)),W={id:"density-mark",tabindex:"-1"},z=i("a",{class:"header-anchor",href:"#density-mark","aria-label":'Permalink to "Density mark <VersionBadge version="0.5.1" />"'},"​",-1),J=i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},"TIP"),i("p",null,[s("For contours of spatially-distributed quantitative values, see the "),i("a",{href:"./contour"},"contour mark"),s(".")])],-1),Y=i("p",null,[s("The "),i("strong",null,"density mark"),s(" shows the "),i("a",{href:"https://en.wikipedia.org/wiki/Multivariate_kernel_density_estimation",target:"_blank",rel:"noreferrer"},"estimated density"),s(" of two-dimensional point clouds. Contours guide the eye towards the local peaks of concentration of the data, much like a topographic map does with elevation. This is especially useful given overplotting in dense datasets.")],-1),$=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-point-cloud-density?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;blue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, strokeWidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;blue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, thresholds: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;currentColor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>The <strong>bandwidth</strong> option specifies the radius of the <a href="https://en.wikipedia.org/wiki/Gaussian_function" target="_blank" rel="noreferrer">Gaussian kernel</a> describing the influence of each point as a function of distance; this kernel is summed over a discrete grid covering the plot, and then contours (<em>isolines</em>) are derived for values between 0 (exclusive) and the maximum density (exclusive) using the <a href="https://en.wikipedia.org/wiki/Marching_squares" target="_blank" rel="noreferrer">marching squares algorithm</a>.</p>`,3),H={class:"label-input"},K={style:{"font-variant-numeric":"tabular-nums"}},Q=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-density-options?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, bandwidth}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>The <strong>thresholds</strong> option specifies the number of contour lines (minus one) to be computed, or an explicit array of threshold values. For example, with 4 thresholds and a maximum density of 10, contour lines would be drawn for the values 2.5, 5, and 7.5. The default number of thresholds is 20.</p>`,3),X={class:"label-input"},Z={style:{"font-variant-numeric":"tabular-nums"}},ii=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-density-options?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, thresholds}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>The density mark also works with one-dimensional values:</p>`,3),si=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-one-dimensional-density?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  height: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;blue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, strokeWidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, bandwidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;blue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, thresholds: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, bandwidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;currentColor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>The density mark supports Plot’s <a href="./../features/projections">projection system</a>, as in this heatmap showing the density of Walmart stores across the contiguous United States (which is a decent proxy for population density).</p>`,3),ti=i("a",{class:"plot-fork no-icon",href:"https://observablehq.com/@observablehq/plot-walmart-density?intent=fork",target:"_blank",title:"Open on Observable"},"Fork",-1),ni={class:"language-js vp-adaptive-theme"},ai=i("button",{title:"Copy Code",class:"copy"},null,-1),ei=i("span",{class:"lang"},"js",-1),pi={class:"shiki shiki-themes github-light github-dark vp-code"},li=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Plot."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"plot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"({")],-1),hi=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  projection: "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"albers"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")],-1),ki={class:"line"},ri=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  color: {scheme: ",-1),oi={style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},Ei=i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"},",-1),gi=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  marks: [")],-1),di=e('<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(walmarts, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;longitude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;latitude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, bandwidth: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;density&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>',1),ui=e('<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">geo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(statemesh, {strokeOpacity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>',1),yi=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Plot."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"geo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(nation),")],-1),ci=e('<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(walmarts, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;longitude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;latitude&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, r: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fill: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;currentColor&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>',1),wi=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]")],-1),Fi=i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"})")],-1),_i=i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},"TIP"),i("p",null,"Use an equal-area projection with the density mark.")],-1),mi=i("p",null,[s("By using the "),i("em",null,"density"),s(" keyword as a "),i("strong",null,"fill"),s(" or "),i("strong",null,"stroke"),s(" color, you can draw regions with a sequential color encoding.")],-1),Ci=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-density-stroke?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  grid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  x: {type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  y: {type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;log&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(diamonds, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;carat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;price&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;density&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>To facilitate comparison across facets (<strong>fx</strong> or <strong>fy</strong>) and series (<strong>z</strong>, <strong>stroke</strong>, or <strong>fill</strong>), the thresholds are determined by the series with the highest density. For instance, the chart below shows the highest concentration of penguins, arranged by flipper length and culmen length, on Biscoe island; the contours in the other facets use the same thresholds.</p>`,3),fi=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-density-faceted?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {fx: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;island&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flipper_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;density&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, clip: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>The <strong>weight</strong> channel specifies the contribution of each data point to the estimated density; it defaults to 1, weighing each point equally. This can be used to give some points more influence than others. Try adjusting the skew slider below to transition between female- and male-weighted density.</p>`,3),bi={class:"label-input"},vi={style:{"font-variant-numeric":"tabular-nums"}},Bi=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-density-weighted?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.sex), {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.sex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;FEMALE&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> skew </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> skew,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flipper_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      strokeOpacity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      clip: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.sex), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flipper_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sex&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      strokeOpacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.sex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;FEMALE&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> skew </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> skew</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>You can specify a negative weight for points that the density contours should avoid, resulting in regions of influence that do not overlap.</p>`,3),qi=e(`<a class="plot-fork no-icon" href="https://observablehq.com/@observablehq/plot-non-overlapping-density-regions?intent=fork" target="_blank" title="Open on Observable">Fork</a><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">plot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  inset: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  color: {legend: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  marks: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    d3.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groups</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.species).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(([</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flipper_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> d.species </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fill</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fillOpacity: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        thresholds: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.05</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(penguins, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;flipper_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;culmen_length_mm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      stroke: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;species&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">frame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="density-options" tabindex="-1">Density options <a class="header-anchor" href="#density-options" aria-label="Permalink to &quot;Density options&quot;">​</a></h2><p>In addition to the <a href="./../features/marks#mark-options">standard mark options</a>, the following optional channels are supported:</p><ul><li><strong>x</strong> - the horizontal position; bound to the <em>x</em> scale</li><li><strong>y</strong> - the vertical position; bound to the <em>y</em> scale</li><li><strong>weight</strong> - the contribution to the estimated density</li></ul><p>If either of the <strong>x</strong> or <strong>y</strong> channels are not specified, the corresponding position is controlled by the <strong>frameAnchor</strong> option.</p><p>The <strong>thresholds</strong> option, which defaults to 20, specifies one more than the number of contours that will be computed at uniformly-spaced intervals between 0 (exclusive) and the maximum density (exclusive). The <strong>thresholds</strong> option may also be specified as an array or iterable of explicit density values. The <strong>bandwidth</strong> option, which defaults to 20, specifies the standard deviation of the Gaussian kernel used for estimation in pixels.</p><p>If a <strong>z</strong>, <strong>stroke</strong> or <strong>fill</strong> channel is specified, the input points are grouped by series, and separate sets of contours are generated for each series. If the <strong>stroke</strong> or <strong>fill</strong> is specified as <em>density</em>, a color channel is constructed with values representing the density threshold value of each contour.</p><h2 id="density" tabindex="-1">density(<em>data</em>, <em>options</em>) <a class="header-anchor" href="#density" aria-label="Permalink to &quot;density(*data*, *options*) {#density}&quot;">​</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Plot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">density</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(faithful, {x: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;waiting&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eruptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Returns a new density mark for the given <em>data</em> and <em>options</em>.</p>`,11),Vi=JSON.parse('{"title":"Density mark","description":"","frontmatter":{},"headers":[],"relativePath":"marks/density.md","filePath":"marks/density.md"}'),Ti={name:"marks/density.md"},ji=Object.assign(Ti,{setup(v){const w=F([]),o=F(null),A=q(()=>o.value?L(o.value,o.value.objects.nation):{type:null}),P=q(()=>o.value?U(o.value,o.value.objects.states,(p,r)=>p!==r):{type:null}),E=_(0),u=_(20),y=_(20),B=F([]);return V(()=>{I("../data/diamonds.csv",b).then(p=>B.value=p),N("../data/walmarts.tsv",b).then(p=>w.value=p),R("../data/us-counties-10m.json").then(p=>o.value=p)}),(p,r)=>{const D=T("VersionBadge"),k=T("PlotRender");return O(),j("div",null,[i("h1",W,[s("Density mark "),l(D,{version:"0.5.1"}),s(),z]),J,Y,l(k,{options:{inset:10,marks:[a(n(h),{x:"waiting",y:"eruptions",stroke:"var(--vp-c-blue)",strokeWidth:.25}),a(n(h),{x:"waiting",y:"eruptions",stroke:"var(--vp-c-blue)",thresholds:4}),g(n(h),{x:"waiting",y:"eruptions",fill:"currentColor",r:1.5})]}},null,8,["options"]),$,i("p",null,[i("label",H,[s(" Bandwidth: "),m(i("input",{type:"range","onUpdate:modelValue":r[0]||(r[0]=t=>u.value=t),min:"0",max:"40",step:"0.2"},null,512),[[C,u.value,void 0,{number:!0}]]),i("span",K,c(u.value.toLocaleString("en-US",{minimumFractionDigits:1})),1)])]),l(k,{defer:"",options:{inset:20,marks:[a(n(h),{x:"waiting",y:"eruptions",bandwidth:u.value}),g(n(h),{x:"waiting",y:"eruptions"})]}},null,8,["options"]),Q,i("p",null,[i("label",X,[s(" Thresholds: "),m(i("input",{type:"range","onUpdate:modelValue":r[1]||(r[1]=t=>y.value=t),min:"1",max:"40",step:"1"},null,512),[[C,y.value,void 0,{number:!0}]]),i("span",Z,c(y.value),1)])]),l(k,{defer:"",options:{inset:20,marks:[a(n(h),{x:"waiting",y:"eruptions",thresholds:y.value}),g(n(h),{x:"waiting",y:"eruptions"})]}},null,8,["options"]),ii,l(k,{defer:"",options:{height:100,inset:10,marks:[a(n(h),{x:"waiting",stroke:"var(--vp-c-blue)",strokeWidth:.25,bandwidth:10}),a(n(h),{x:"waiting",stroke:"var(--vp-c-blue)",thresholds:4,bandwidth:10}),g(n(h),{x:"waiting",fill:"currentColor",r:1.5})]}},null,8,["options"]),si,l(k,{defer:"",options:{projection:"albers",color:{scheme:p.$dark?"turbo":"YlGnBu"},marks:[a(w.value,{x:"longitude",y:"latitude",bandwidth:10,fill:"density"}),x(P.value,{strokeOpacity:.3}),x(A.value),g(w.value,{x:"longitude",y:"latitude",r:1,fill:"currentColor"})]}},null,8,["options"]),ti,i("div",ni,[ai,ei,i("pre",pi,[i("code",null,[li,s(`
`),hi,s(`
`),i("span",ki,[ri,i("span",oi,'"'+c(p.$dark?"turbo":"YlGnBu")+'"',1),Ei]),s(`
`),gi,s(`
`),di,s(`
`),ui,s(`
`),yi,s(`
`),ci,s(`
`),wi,s(`
`),Fi])])]),_i,mi,l(k,{defer:"",options:{inset:10,grid:!0,x:{type:"log"},y:{type:"log"},marks:[a(B.value,{x:"carat",y:"price",stroke:"density"})]}},null,8,["options"]),Ci,l(k,{defer:"",options:{marks:[a(n(d),{fx:"island",x:"flipper_length_mm",y:"culmen_length_mm",stroke:"density",clip:!0}),f()]}},null,8,["options"]),fi,i("p",null,[i("label",bi,[s(" Skew (-F/+M): "),m(i("input",{type:"range","onUpdate:modelValue":r[2]||(r[2]=t=>E.value=t),min:"-1",max:"1",step:"0.01"},null,512),[[C,E.value,void 0,{number:!0}]]),i("span",vi,c(E.value.toLocaleString("en-US",{minimumFractionDigits:2,signDisplay:"always"})),1)])]),l(k,{defer:"",options:{inset:10,color:{legend:!0},marks:[a(n(d).filter(t=>t.sex),{weight:t=>t.sex==="FEMALE"?1-E.value:1+E.value,x:"flipper_length_mm",y:"culmen_length_mm",strokeOpacity:.5,clip:!0}),g(n(d).filter(t=>t.sex),{x:"flipper_length_mm",y:"culmen_length_mm",stroke:"sex",strokeOpacity:t=>t.sex==="FEMALE"?1-E.value:1+E.value}),f()]}},null,8,["options"]),Bi,l(k,{defer:"",options:{inset:10,color:{legend:!0},marks:[M(n(d),t=>t.species).map(([t])=>a(n(d),{x:"flipper_length_mm",y:"culmen_length_mm",weight:S=>S.species===t?1:-1,fill:()=>t,fillOpacity:.2,thresholds:[.05]})),g(n(d),{x:"flipper_length_mm",y:"culmen_length_mm",stroke:"species"}),f()]}},null,8,["options"]),qi])}}});export{Vi as __pageData,ji as default};
