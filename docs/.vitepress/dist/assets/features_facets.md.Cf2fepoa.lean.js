import{b as c,s as A,c as w,f as h,e as r,g as P,h as C,i as N,u as D,j as S,n as W,t as _,k as R,m as M}from"./chunks/theme.DAWdUpF4.js";import{i as x}from"./chunks/bls-industry-unemployment.BPQ_6ZKz.js";import{p as d}from"./chunks/penguins.C-n8z74Q.js";import{J as G,p as V,G as B,c as I,q as i,a as s,S as y,s as a,L as t,a6 as n,o as O}from"./chunks/framework.Bev6ATEH.js";const U=JSON.parse('[{"series":"1","x":"10","y":"8.04"},{"series":"1","x":"8","y":"6.95"},{"series":"1","x":"13","y":"7.58"},{"series":"1","x":"9","y":"8.81"},{"series":"1","x":"11","y":"8.33"},{"series":"1","x":"14","y":"9.96"},{"series":"1","x":"6","y":"7.24"},{"series":"1","x":"4","y":"4.26"},{"series":"1","x":"12","y":"10.84"},{"series":"1","x":"7","y":"4.81"},{"series":"1","x":"5","y":"5.68"},{"series":"2","x":"10","y":"9.14"},{"series":"2","x":"8","y":"8.14"},{"series":"2","x":"13","y":"8.74"},{"series":"2","x":"9","y":"8.77"},{"series":"2","x":"11","y":"9.26"},{"series":"2","x":"14","y":"8.1"},{"series":"2","x":"6","y":"6.13"},{"series":"2","x":"4","y":"3.1"},{"series":"2","x":"12","y":"9.13"},{"series":"2","x":"7","y":"7.26"},{"series":"2","x":"5","y":"4.74"},{"series":"3","x":"10","y":"7.46"},{"series":"3","x":"8","y":"6.77"},{"series":"3","x":"13","y":"12.74"},{"series":"3","x":"9","y":"7.11"},{"series":"3","x":"11","y":"7.81"},{"series":"3","x":"14","y":"8.84"},{"series":"3","x":"6","y":"6.08"},{"series":"3","x":"4","y":"5.39"},{"series":"3","x":"12","y":"8.15"},{"series":"3","x":"7","y":"6.42"},{"series":"3","x":"5","y":"5.73"},{"series":"4","x":"8","y":"6.58"},{"series":"4","x":"8","y":"5.76"},{"series":"4","x":"8","y":"7.71"},{"series":"4","x":"8","y":"8.84"},{"series":"4","x":"8","y":"8.47"},{"series":"4","x":"8","y":"7.04"},{"series":"4","x":"8","y":"5.25"},{"series":"4","x":"19","y":"12.5"},{"series":"4","x":"8","y":"5.56"},{"series":"4","x":"8","y":"7.91"},{"series":"4","x":"8","y":"6.89"}]'),g=U.map(({...p})=>c(p)),j=JSON.parse('[{"yield":"27","variety":"Manchuria","year":"1931","site":"University Farm"},{"yield":"48.86667","variety":"Manchuria","year":"1931","site":"Waseca"},{"yield":"27.43334","variety":"Manchuria","year":"1931","site":"Morris"},{"yield":"39.93333","variety":"Manchuria","year":"1931","site":"Crookston"},{"yield":"32.96667","variety":"Manchuria","year":"1931","site":"Grand Rapids"},{"yield":"28.96667","variety":"Manchuria","year":"1931","site":"Duluth"},{"yield":"43.06666","variety":"Glabron","year":"1931","site":"University Farm"},{"yield":"55.2","variety":"Glabron","year":"1931","site":"Waseca"},{"yield":"28.76667","variety":"Glabron","year":"1931","site":"Morris"},{"yield":"38.13333","variety":"Glabron","year":"1931","site":"Crookston"},{"yield":"29.13333","variety":"Glabron","year":"1931","site":"Grand Rapids"},{"yield":"29.66667","variety":"Glabron","year":"1931","site":"Duluth"},{"yield":"35.13333","variety":"Svansota","year":"1931","site":"University Farm"},{"yield":"47.33333","variety":"Svansota","year":"1931","site":"Waseca"},{"yield":"25.76667","variety":"Svansota","year":"1931","site":"Morris"},{"yield":"40.46667","variety":"Svansota","year":"1931","site":"Crookston"},{"yield":"29.66667","variety":"Svansota","year":"1931","site":"Grand Rapids"},{"yield":"25.7","variety":"Svansota","year":"1931","site":"Duluth"},{"yield":"39.9","variety":"Velvet","year":"1931","site":"University Farm"},{"yield":"50.23333","variety":"Velvet","year":"1931","site":"Waseca"},{"yield":"26.13333","variety":"Velvet","year":"1931","site":"Morris"},{"yield":"41.33333","variety":"Velvet","year":"1931","site":"Crookston"},{"yield":"23.03333","variety":"Velvet","year":"1931","site":"Grand Rapids"},{"yield":"26.3","variety":"Velvet","year":"1931","site":"Duluth"},{"yield":"36.56666","variety":"Trebi","year":"1931","site":"University Farm"},{"yield":"63.8333","variety":"Trebi","year":"1931","site":"Waseca"},{"yield":"43.76667","variety":"Trebi","year":"1931","site":"Morris"},{"yield":"46.93333","variety":"Trebi","year":"1931","site":"Crookston"},{"yield":"29.76667","variety":"Trebi","year":"1931","site":"Grand Rapids"},{"yield":"33.93333","variety":"Trebi","year":"1931","site":"Duluth"},{"yield":"43.26667","variety":"No. 457","year":"1931","site":"University Farm"},{"yield":"58.1","variety":"No. 457","year":"1931","site":"Waseca"},{"yield":"28.7","variety":"No. 457","year":"1931","site":"Morris"},{"yield":"45.66667","variety":"No. 457","year":"1931","site":"Crookston"},{"yield":"32.16667","variety":"No. 457","year":"1931","site":"Grand Rapids"},{"yield":"33.6","variety":"No. 457","year":"1931","site":"Duluth"},{"yield":"36.6","variety":"No. 462","year":"1931","site":"University Farm"},{"yield":"65.7667","variety":"No. 462","year":"1931","site":"Waseca"},{"yield":"30.36667","variety":"No. 462","year":"1931","site":"Morris"},{"yield":"48.56666","variety":"No. 462","year":"1931","site":"Crookston"},{"yield":"24.93334","variety":"No. 462","year":"1931","site":"Grand Rapids"},{"yield":"28.1","variety":"No. 462","year":"1931","site":"Duluth"},{"yield":"32.76667","variety":"Peatland","year":"1931","site":"University Farm"},{"yield":"48.56666","variety":"Peatland","year":"1931","site":"Waseca"},{"yield":"29.86667","variety":"Peatland","year":"1931","site":"Morris"},{"yield":"41.6","variety":"Peatland","year":"1931","site":"Crookston"},{"yield":"34.7","variety":"Peatland","year":"1931","site":"Grand Rapids"},{"yield":"32","variety":"Peatland","year":"1931","site":"Duluth"},{"yield":"24.66667","variety":"No. 475","year":"1931","site":"University Farm"},{"yield":"46.76667","variety":"No. 475","year":"1931","site":"Waseca"},{"yield":"22.6","variety":"No. 475","year":"1931","site":"Morris"},{"yield":"44.1","variety":"No. 475","year":"1931","site":"Crookston"},{"yield":"19.7","variety":"No. 475","year":"1931","site":"Grand Rapids"},{"yield":"33.06666","variety":"No. 475","year":"1931","site":"Duluth"},{"yield":"39.3","variety":"Wisconsin No. 38","year":"1931","site":"University Farm"},{"yield":"58.8","variety":"Wisconsin No. 38","year":"1931","site":"Waseca"},{"yield":"29.46667","variety":"Wisconsin No. 38","year":"1931","site":"Morris"},{"yield":"49.86667","variety":"Wisconsin No. 38","year":"1931","site":"Crookston"},{"yield":"34.46667","variety":"Wisconsin No. 38","year":"1931","site":"Grand Rapids"},{"yield":"31.6","variety":"Wisconsin No. 38","year":"1931","site":"Duluth"},{"yield":"26.9","variety":"Manchuria","year":"1932","site":"University Farm"},{"yield":"33.46667","variety":"Manchuria","year":"1932","site":"Waseca"},{"yield":"34.36666","variety":"Manchuria","year":"1932","site":"Morris"},{"yield":"32.96667","variety":"Manchuria","year":"1932","site":"Crookston"},{"yield":"22.13333","variety":"Manchuria","year":"1932","site":"Grand Rapids"},{"yield":"22.56667","variety":"Manchuria","year":"1932","site":"Duluth"},{"yield":"36.8","variety":"Glabron","year":"1932","site":"University Farm"},{"yield":"37.73333","variety":"Glabron","year":"1932","site":"Waseca"},{"yield":"35.13333","variety":"Glabron","year":"1932","site":"Morris"},{"yield":"26.16667","variety":"Glabron","year":"1932","site":"Crookston"},{"yield":"14.43333","variety":"Glabron","year":"1932","site":"Grand Rapids"},{"yield":"25.86667","variety":"Glabron","year":"1932","site":"Duluth"},{"yield":"27.43334","variety":"Svansota","year":"1932","site":"University Farm"},{"yield":"38.5","variety":"Svansota","year":"1932","site":"Waseca"},{"yield":"35.03333","variety":"Svansota","year":"1932","site":"Morris"},{"yield":"20.63333","variety":"Svansota","year":"1932","site":"Crookston"},{"yield":"16.63333","variety":"Svansota","year":"1932","site":"Grand Rapids"},{"yield":"22.23333","variety":"Svansota","year":"1932","site":"Duluth"},{"yield":"26.8","variety":"Velvet","year":"1932","site":"University Farm"},{"yield":"37.4","variety":"Velvet","year":"1932","site":"Waseca"},{"yield":"38.83333","variety":"Velvet","year":"1932","site":"Morris"},{"yield":"32.06666","variety":"Velvet","year":"1932","site":"Crookston"},{"yield":"32.23333","variety":"Velvet","year":"1932","site":"Grand Rapids"},{"yield":"22.46667","variety":"Velvet","year":"1932","site":"Duluth"},{"yield":"29.06667","variety":"Trebi","year":"1932","site":"University Farm"},{"yield":"49.2333","variety":"Trebi","year":"1932","site":"Waseca"},{"yield":"46.63333","variety":"Trebi","year":"1932","site":"Morris"},{"yield":"41.83333","variety":"Trebi","year":"1932","site":"Crookston"},{"yield":"20.63333","variety":"Trebi","year":"1932","site":"Grand Rapids"},{"yield":"30.6","variety":"Trebi","year":"1932","site":"Duluth"},{"yield":"26.43334","variety":"No. 457","year":"1932","site":"University Farm"},{"yield":"42.2","variety":"No. 457","year":"1932","site":"Waseca"},{"yield":"43.53334","variety":"No. 457","year":"1932","site":"Morris"},{"yield":"34.33333","variety":"No. 457","year":"1932","site":"Crookston"},{"yield":"19.46667","variety":"No. 457","year":"1932","site":"Grand Rapids"},{"yield":"22.7","variety":"No. 457","year":"1932","site":"Duluth"},{"yield":"25.56667","variety":"No. 462","year":"1932","site":"University Farm"},{"yield":"44.7","variety":"No. 462","year":"1932","site":"Waseca"},{"yield":"47","variety":"No. 462","year":"1932","site":"Morris"},{"yield":"30.53333","variety":"No. 462","year":"1932","site":"Crookston"},{"yield":"19.9","variety":"No. 462","year":"1932","site":"Grand Rapids"},{"yield":"22.5","variety":"No. 462","year":"1932","site":"Duluth"},{"yield":"28.06667","variety":"Peatland","year":"1932","site":"University Farm"},{"yield":"36.03333","variety":"Peatland","year":"1932","site":"Waseca"},{"yield":"43.2","variety":"Peatland","year":"1932","site":"Morris"},{"yield":"25.23333","variety":"Peatland","year":"1932","site":"Crookston"},{"yield":"26.76667","variety":"Peatland","year":"1932","site":"Grand Rapids"},{"yield":"31.36667","variety":"Peatland","year":"1932","site":"Duluth"},{"yield":"30","variety":"No. 475","year":"1932","site":"University Farm"},{"yield":"41.26667","variety":"No. 475","year":"1932","site":"Waseca"},{"yield":"44.23333","variety":"No. 475","year":"1932","site":"Morris"},{"yield":"32.13333","variety":"No. 475","year":"1932","site":"Crookston"},{"yield":"15.23333","variety":"No. 475","year":"1932","site":"Grand Rapids"},{"yield":"27.36667","variety":"No. 475","year":"1932","site":"Duluth"},{"yield":"38","variety":"Wisconsin No. 38","year":"1932","site":"University Farm"},{"yield":"58.16667","variety":"Wisconsin No. 38","year":"1932","site":"Waseca"},{"yield":"47.16667","variety":"Wisconsin No. 38","year":"1932","site":"Morris"},{"yield":"35.9","variety":"Wisconsin No. 38","year":"1932","site":"Crookston"},{"yield":"20.66667","variety":"Wisconsin No. 38","year":"1932","site":"Grand Rapids"},{"yield":"29.33333","variety":"Wisconsin No. 38","year":"1932","site":"Duluth"}]'),q=j.map(({...p})=>c(p)),z=i("h1",{id:"facets",tabindex:"-1"},[s("Facets "),i("a",{class:"header-anchor",href:"#facets","aria-label":'Permalink to "Facets"'},"​")],-1),L=i("p",null,[s("Faceting partitions data by ordinal or categorical value and then repeats a plot for each partition (each "),i("strong",null,"facet"),s("), producing "),i("a",{href:"https://en.wikipedia.org/wiki/Small_multiple",target:"_blank",rel:"noreferrer"},"small multiples"),s(" for comparison. Faceting is typically enabled by declaring the horizontal↔︎ facet channel "),i("strong",null,"fx"),s(", the vertical↕︎ facet channel "),i("strong",null,"fy"),s(", or both for two-dimensional faceting.")],-1),Y=i("a",{href:"https://hci.stanford.edu/courses/cs448b/papers/becker-trellis-jcgs.pdf",target:"_blank",rel:"noreferrer"},[s("Becker "),i("em",null,"et al.")],-1),J=i("strong",null,"fy",-1),$=n("",4),X=i("a",{href:"./../transforms/group"},"group transform",-1),H=n("",4),Q=n("",4),K=n("",3),Z=n("",4),ss=n("",5),is=n("",3),as=i("strong",null,"fx",-1),es=i("strong",null,"fy",-1),ts=i("strong",null,"fx",-1),ns=i("strong",null,"fy",-1),ls=i("a",{href:"./transforms"},"mark’s transform",-1),hs=i("em",null,"i.e.",-1),rs=i("a",{href:"#plot-facet-options"},[i("strong",null,"facet"),s(" plot option")],-1),ps=n("",3),ks=i("strong",null,"facetAnchor",-1),os=i("a",{id:"facetAnchor",class:"header-anchor",href:"#facetAnchor","aria-label":'Permalink to "facetAnchor"'},null,-1),Es=n("",9),ds=n("",9),fs=JSON.parse('{"title":"Facets","description":"","frontmatter":{},"headers":[],"relativePath":"features/facets.md","filePath":"features/facets.md"}'),ys={name:"features/facets.md"},vs=Object.assign(ys,{setup(p){const u=G([{weight:31,height:1.21,sex:"female"},{weight:170,height:2.21,sex:"male"}]),k=A({color:{type:"categorical"}}).range;return V(()=>{w("../data/athletes.csv",c).then(m=>u.value=m)}),(m,gs)=>{const l=B("PlotRender"),F=B("VersionBadge");return O(),I("div",null,[z,L,i("p",null,[s("For example, below we recreate the Trellis display (“reminiscent of garden trelliswork”) of "),Y,s(" using the dot’s "),J,s(" channel to declare vertical↕︎ facets, showing the yields of several varieties of barley across several sites for the years "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[0]}`})},"1931",4),s(" and "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[1]}`})},"1932",4),s(".")]),t(l,{options:{height:800,marginRight:90,marginLeft:110,grid:!0,x:{nice:!0},y:{inset:5},color:{type:"categorical"},marks:[h(),r(a(q),{x:"yield",y:"variety",fy:"site",stroke:"year",sort:{y:"-x",fy:"-x",reduce:"median"}})]}},null,8,["options"]),$,i("p",null,[s("The chart above reveals a likely data collection error: the years appear to be reversed for the Morris site as it is the only site where the yields in "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[1]}`})},"1932",4),s(" were higher than in "),i("span",{style:y({borderBottom:`solid 2px ${a(k)[0]}`})},"1931",4),s(". The anomaly in Morris is more obvious if we use directed arrows to show the year-over-year change. The "),X,s(" groups the observations by site and variety to compute the change.")]),t(l,{defer:"",options:{height:800,marginLeft:110,grid:!0,x:{nice:!0},y:{inset:5},color:{scheme:"spectral",label:"Change in yield",tickFormat:"+f",legend:!0},facet:{marginRight:90},marks:[h(),P(a(q),C({x1:"first",x2:"last",stroke:([o,E])=>E-o},{x:"yield",y:"variety",fy:"site",stroke:"yield",strokeWidth:2,sort:{y:"-x1",fy:"-x1",reduce:"median"}}))]}},null,8,["options"]),H,t(l,{defer:"",options:{fy:{grid:!0,tickFormat:".1f",interval:.1,reverse:!0},marks:[N(u.value.filter(o=>o.height),{x:"weight",fy:"height"})]}},null,8,["options"]),Q,t(l,{defer:"",options:{grid:!0,marginRight:60,facet:{label:null},marks:[h(),r(a(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fx:"sex",fy:"species"})]}},null,8,["options"]),K,t(l,{defer:"",options:{grid:!0,marginRight:60,facet:{label:null},marks:[h(),r(a(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fill:"#aaa",r:1}),r(a(d),{x:"culmen_length_mm",y:"culmen_depth_mm",fx:"sex",fy:"species"})]}},null,8,["options"]),Z,t(l,{defer:"",options:(()=>{const E=Array.from(D(a(x).map(e=>e.industry))),f=new Map(E.map((e,T)=>[e,T])),v=e=>f.get(e)%3,b=e=>Math.floor(f.get(e)/3);return{height:300,axis:null,y:{insetTop:10},fx:{padding:.03},marks:[S(a(x),W("extent",{x:"date",y:"unemployed",fx:e=>v(e.industry),fy:e=>b(e.industry)})),_(E,{fx:v,fy:b,frameAnchor:"top-left",dx:6,dy:6}),h()]}})()},null,8,["options"]),ss,t(l,{defer:"",options:{marginLeft:60,marginRight:60,grid:!0,y:{label:null},fy:{label:null},color:{legend:!0},marks:[R(a(d),C({x:"count"},{fy:"species",y:"island",fill:"sex"})),_(["While Chinstrap and Gentoo penguins were each observed on only one island, Adelie penguins were observed on all three islands."],{fy:["Adelie"],frameAnchor:"top-right",lineWidth:18,dx:-6,dy:6}),h()]}},null,8,["options"]),is,i("p",null,[s("Facets can be defined for each mark via the "),as,s(" or "),es,s(" channels. "),t(F,{version:"0.6.1"}),s(" The "),ts,s(" and "),ns,s(" channels are computed prior to the "),ls,s(", if any ("),hs,s(", facet channels are not transformed). Alternatively, the "),rs,s(" allows top-level faceting based on data.")]),ps,i("p",null,[s("The "),ks,s(" option"),os,s(),t(F,{version:"0.6.3"}),s(" controls the placement of the mark with respect to the facets. Based on the value, the mark will be displayed on:")]),Es,t(l,{options:{grid:!0,aspectRatio:.5,facet:{data:a(g),x:"series"},marks:[h(),M(a(g),{x:"x",y:"y"}),r(a(g),{x:"x",y:"y"})]}},null,8,["options"]),ds])}}});export{fs as __pageData,vs as default};
